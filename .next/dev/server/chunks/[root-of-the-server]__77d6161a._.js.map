{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/lib/csv/product-template.ts"],"sourcesContent":["// Definición del template CSV para productos\n// Los campos están ordenados según la especificación del usuario\n\nexport interface ProductCSVRow {\n  // Campos de identificación\n  Ref: string;\n  Cod_Barra: string;\n  Producto: string;\n  Descripcion: string;\n  Marca: string;\n  \n  // Precios y ofertas\n  Precio_COP: string;\n  Descuento: string; // Porcentaje (0-100)\n  \n  // Inventario\n  Existencia_inv: string;\n  Pedido_en_camino: string; // SI/NO\n  Descontinuado: string; // SI/NO\n  \n  // Empaque\n  Inner_pack: string;\n  Outer_pack: string;\n  \n  // Categorización\n  Coleccion: string;\n  Categoria: string; // Silo principal\n  Subcategoria: string;\n  Tipo_producto: string;\n  \n  // Características físicas\n  Material: string;\n  Color: string;\n  Dimensiones: string;\n  Peso_kg: string;\n  Capacidad: string;\n  Pais_origen: string;\n  \n  // Contenido para cliente final\n  Descrip_Cliente_Final: string;\n  Momentos_Uso_Cliente: string;\n  Productos_Afines_Cliente: string; // Referencias separadas por coma\n  \n  // Contenido para distribuidor/canal\n  Descrip_Distribuidor: string;\n  Argumentos_Venta_Distribuidor: string;\n  Ubicacion_Tienda_Distribuidor: string;\n  Margen_Sugerido: string; // Porcentaje\n  Rotacion_Esperada: string; // alta/media/baja\n  \n  // SEO\n  SEO_Title: string;\n  SEO_Description: string;\n  Tags: string; // Separadas por coma\n  \n  // Multimedia\n  Video_URL: string;\n  Ficha_Tecnica_URL: string;\n  Fecha_Lanzamiento: string; // YYYY-MM-DD\n  \n  // Imágenes (URLs)\n  Image_1: string;\n  Image_2: string;\n  Image_3: string;\n  Image_4: string;\n  Image_5: string;\n  Image_6: string;\n  Image_7: string;\n  Image_8: string;\n  Image_9: string;\n  Image_10: string;\n}\n\nexport const CSV_HEADERS: (keyof ProductCSVRow)[] = [\n  'Ref',\n  'Cod_Barra',\n  'Producto',\n  'Descripcion',\n  'Marca',\n  'Precio_COP',\n  'Descuento',\n  'Existencia_inv',\n  'Pedido_en_camino',\n  'Descontinuado',\n  'Inner_pack',\n  'Outer_pack',\n  'Coleccion',\n  'Categoria',\n  'Subcategoria',\n  'Tipo_producto',\n  'Material',\n  'Color',\n  'Dimensiones',\n  'Peso_kg',\n  'Capacidad',\n  'Pais_origen',\n  'Descrip_Cliente_Final',\n  'Momentos_Uso_Cliente',\n  'Productos_Afines_Cliente',\n  'Descrip_Distribuidor',\n  'Argumentos_Venta_Distribuidor',\n  'Ubicacion_Tienda_Distribuidor',\n  'Margen_Sugerido',\n  'Rotacion_Esperada',\n  'SEO_Title',\n  'SEO_Description',\n  'Tags',\n  'Video_URL',\n  'Ficha_Tecnica_URL',\n  'Fecha_Lanzamiento',\n  'Image_1',\n  'Image_2',\n  'Image_3',\n  'Image_4',\n  'Image_5',\n  'Image_6',\n  'Image_7',\n  'Image_8',\n  'Image_9',\n  'Image_10',\n];\n\nexport const CSV_HEADER_DESCRIPTIONS: Record<keyof ProductCSVRow, string> = {\n  Ref: 'Código de referencia único del producto (obligatorio)',\n  Cod_Barra: 'Código de barras EAN/UPC',\n  Producto: 'Nombre comercial del producto (obligatorio)',\n  Descripcion: 'Descripción corta o subtítulo',\n  Marca: 'Marca del producto',\n  Precio_COP: 'Precio base en pesos colombianos (obligatorio)',\n  Descuento: 'Porcentaje de descuento (0-100). Si > 0, aparece en ofertas',\n  Existencia_inv: 'Cantidad en inventario',\n  Pedido_en_camino: 'SI/NO - Indica si hay pedido en tránsito',\n  Descontinuado: 'SI/NO - Producto que no se volverá a pedir',\n  Inner_pack: 'Empaque primario (unidades por empaque)',\n  Outer_pack: 'Empaque secundario (empaques primarios por caja)',\n  Coleccion: 'Nombre de la colección a la que pertenece',\n  Categoria: 'Categoría principal (Cocina, Mesa, Café-Té-Bar, Termos-Neveras, Profesional)',\n  Subcategoria: 'Subcategoría dentro de la categoría principal',\n  Tipo_producto: 'Tipo específico de producto (3er nivel)',\n  Material: 'Material principal del producto',\n  Color: 'Color del producto',\n  Dimensiones: 'Dimensiones del producto (ej: 30x20x10 cm)',\n  Peso_kg: 'Peso en kilogramos',\n  Capacidad: 'Capacidad si aplica (ej: 500ml)',\n  Pais_origen: 'País de origen del producto',\n  Descrip_Cliente_Final: 'Descripción amplia para cliente final',\n  Momentos_Uso_Cliente: 'Momentos de uso sugeridos para cliente final',\n  Productos_Afines_Cliente: 'Referencias de productos afines separadas por coma',\n  Descrip_Distribuidor: 'Descripción visible solo para distribuidores y canal',\n  Argumentos_Venta_Distribuidor: 'Argumentos de venta para distribuidores',\n  Ubicacion_Tienda_Distribuidor: 'Sugerencia de ubicación en tienda del distribuidor',\n  Margen_Sugerido: 'Margen de ganancia sugerido para distribuidor (%)',\n  Rotacion_Esperada: 'Rotación esperada: alta, media o baja',\n  SEO_Title: 'Título SEO para buscadores',\n  SEO_Description: 'Descripción SEO para buscadores',\n  Tags: 'Etiquetas de búsqueda separadas por coma',\n  Video_URL: 'URL del video del producto',\n  Ficha_Tecnica_URL: 'URL del PDF de ficha técnica',\n  Fecha_Lanzamiento: 'Fecha de lanzamiento (YYYY-MM-DD)',\n  Image_1: 'URL de imagen principal (obligatoria)',\n  Image_2: 'URL de imagen 2',\n  Image_3: 'URL de imagen 3',\n  Image_4: 'URL de imagen 4',\n  Image_5: 'URL de imagen 5',\n  Image_6: 'URL de imagen 6',\n  Image_7: 'URL de imagen 7',\n  Image_8: 'URL de imagen 8',\n  Image_9: 'URL de imagen 9',\n  Image_10: 'URL de imagen 10',\n};\n\nexport const REQUIRED_FIELDS: (keyof ProductCSVRow)[] = [\n  'Ref',\n  'Producto',\n  'Precio_COP',\n];\n\nexport const BOOLEAN_FIELDS: (keyof ProductCSVRow)[] = [\n  'Pedido_en_camino',\n  'Descontinuado',\n];\n\nexport const NUMERIC_FIELDS: (keyof ProductCSVRow)[] = [\n  'Precio_COP',\n  'Descuento',\n  'Existencia_inv',\n  'Peso_kg',\n  'Margen_Sugerido',\n];\n\nexport const VALID_CATEGORIES = [\n  'Cocina',\n  'Mesa',\n  'Café-Té-Bar',\n  'Termos-Neveras',\n  'Profesional',\n];\n\nexport const VALID_ROTACION = ['alta', 'media', 'baja'];\n\nexport function generateEmptyCSVTemplate(): string {\n  return CSV_HEADERS.join(',');\n}\n\nexport function generateCSVWithDescriptions(): string {\n  const headerRow = CSV_HEADERS.join(',');\n  const descriptionRow = CSV_HEADERS.map(h => `\"${CSV_HEADER_DESCRIPTIONS[h]}\"`).join(',');\n  const exampleRow = generateExampleRow();\n  \n  return `${headerRow}\\n${descriptionRow}\\n${exampleRow}`;\n}\n\nfunction generateExampleRow(): string {\n  const example: Partial<ProductCSVRow> = {\n    Ref: 'ABC-001',\n    Cod_Barra: '7701234567890',\n    Producto: 'Tabla de Cortar Bambú Premium',\n    Descripcion: 'Tabla de cortar profesional en bambú ecológico',\n    Marca: 'Mesa Nova',\n    Precio_COP: '89900',\n    Descuento: '15',\n    Existencia_inv: '150',\n    Pedido_en_camino: 'NO',\n    Descontinuado: 'NO',\n    Inner_pack: '1',\n    Outer_pack: '12',\n    Coleccion: 'Eco Kitchen',\n    Categoria: 'Cocina',\n    Subcategoria: 'Corte y Picado',\n    Tipo_producto: 'Tablas de Cortar',\n    Material: 'Bambú',\n    Color: 'Natural',\n    Dimensiones: '40x30x2 cm',\n    Peso_kg: '0.8',\n    Capacidad: '',\n    Pais_origen: 'China',\n    Descrip_Cliente_Final: 'Tabla de cortar elaborada en bambú 100% natural...',\n    Momentos_Uso_Cliente: 'Ideal para preparar tus comidas diarias...',\n    Productos_Afines_Cliente: 'ABC-002,ABC-003',\n    Descrip_Distribuidor: 'Producto de alta rotación con excelente margen...',\n    Argumentos_Venta_Distribuidor: 'Material ecológico muy demandado...',\n    Ubicacion_Tienda_Distribuidor: 'Zona de cocina cerca de cuchillos',\n    Margen_Sugerido: '40',\n    Rotacion_Esperada: 'alta',\n    SEO_Title: 'Tabla de Cortar Bambú | Mesa Nova',\n    SEO_Description: 'Compra tabla de cortar en bambú ecológico...',\n    Tags: 'tabla,cortar,bambú,cocina,ecológico',\n    Video_URL: 'https://youtube.com/watch?v=xxx',\n    Ficha_Tecnica_URL: 'https://cdn.mesanova.com/fichas/abc-001.pdf',\n    Fecha_Lanzamiento: '2026-01-15',\n    Image_1: 'https://cdn.mesanova.com/products/abc-001-1.jpg',\n    Image_2: 'https://cdn.mesanova.com/products/abc-001-2.jpg',\n    Image_3: '',\n    Image_4: '',\n    Image_5: '',\n    Image_6: '',\n    Image_7: '',\n    Image_8: '',\n    Image_9: '',\n    Image_10: '',\n  };\n  \n  return CSV_HEADERS.map(h => {\n    const value = example[h] || '';\n    return value.includes(',') || value.includes('\"') ? `\"${value.replace(/\"/g, '\"\"')}\"` : value;\n  }).join(',');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/app/api/products/csv/template/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { generateCSVWithDescriptions, generateEmptyCSVTemplate } from '@/lib/csv/product-template';\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url);\n  const includeDescriptions = searchParams.get('descriptions') === 'true';\n  \n  const csvContent = includeDescriptions \n    ? generateCSVWithDescriptions() \n    : generateEmptyCSVTemplate();\n  \n  const filename = includeDescriptions \n    ? 'productos_template_con_instrucciones.csv'\n    : 'productos_template.csv';\n  \n  return new NextResponse(csvContent, {\n    headers: {\n      'Content-Type': 'text/csv; charset=utf-8',\n      'Content-Disposition': `attachment; filename=\"${filename}\"`,\n    },\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,sBAAsB,aAAa,GAAG,CAAC,oBAAoB;IAEjE,MAAM,aAAa,sBACf,IAAA,kKAA2B,MAC3B,IAAA,+JAAwB;IAE5B,MAAM,WAAW,sBACb,6CACA;IAEJ,OAAO,IAAI,gJAAY,CAAC,YAAY;QAClC,SAAS;YACP,gBAAgB;YAChB,uBAAuB,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;QAC7D;IACF;AACF"}}]
}