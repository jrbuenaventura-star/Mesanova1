{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/lib/db/user-features.ts"],"sourcesContent":["import \"server-only\"\n\nimport { createClient } from \"@/lib/supabase/server\"\n\n// =============================================================================\n// FAVORITOS\n// =============================================================================\n\nexport async function getUserFavorites(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"favorites\")\n    .select(`\n      id,\n      created_at,\n      product:products (\n        id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia\n      )\n    `)\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function addToFavorites(userId: string, productId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"favorites\")\n    .insert({ user_id: userId, product_id: productId })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function removeFromFavorites(userId: string, productId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase\n    .from(\"favorites\")\n    .delete()\n    .eq(\"user_id\", userId)\n    .eq(\"product_id\", productId)\n\n  if (error) throw error\n}\n\nexport async function isProductFavorited(userId: string, productId: string) {\n  const supabase = await createClient()\n  const { data } = await supabase\n    .from(\"favorites\")\n    .select(\"id\")\n    .eq(\"user_id\", userId)\n    .eq(\"product_id\", productId)\n    .single()\n\n  return !!data\n}\n\n// =============================================================================\n// WISHLISTS\n// =============================================================================\n\nexport async function getUserWishlists(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"wishlists\")\n    .select(`\n      id, name, description, is_public, share_token, created_at,\n      wishlist_items (count)\n    `)\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function getWishlistById(wishlistId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"wishlists\")\n    .select(`\n      id, name, description, is_public, share_token, user_id, created_at,\n      wishlist_items (\n        id, quantity, priority, notes, added_at,\n        product:products (\n          id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia\n        )\n      )\n    `)\n    .eq(\"id\", wishlistId)\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function getWishlistByToken(shareToken: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"wishlists\")\n    .select(`\n      id, name, description, is_public, share_token, created_at,\n      user_profiles:user_id (full_name),\n      wishlist_items (\n        id, quantity, priority, notes,\n        product:products (\n          id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia\n        )\n      )\n    `)\n    .eq(\"share_token\", shareToken)\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function createWishlist(userId: string, name: string, description?: string, isPublic = false) {\n  const supabase = await createClient()\n  const shareToken = crypto.randomUUID().replace(/-/g, \"\")\n  \n  const { data, error } = await supabase\n    .from(\"wishlists\")\n    .insert({ user_id: userId, name, description, is_public: isPublic, share_token: shareToken })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function updateWishlist(wishlistId: string, updates: { name?: string; description?: string; is_public?: boolean }) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"wishlists\")\n    .update(updates)\n    .eq(\"id\", wishlistId)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function deleteWishlist(wishlistId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase.from(\"wishlists\").delete().eq(\"id\", wishlistId)\n  if (error) throw error\n}\n\nexport async function addToWishlist(wishlistId: string, productId: string, quantity = 1, notes?: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"wishlist_items\")\n    .insert({ wishlist_id: wishlistId, product_id: productId, quantity, notes })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function removeFromWishlist(wishlistId: string, productId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase\n    .from(\"wishlist_items\")\n    .delete()\n    .eq(\"wishlist_id\", wishlistId)\n    .eq(\"product_id\", productId)\n\n  if (error) throw error\n}\n\n// =============================================================================\n// GIFT REGISTRIES (Listas de Matrimonio)\n// =============================================================================\n\nexport type GiftRegistryEventType = \"wedding\" | \"baby_shower\" | \"birthday\" | \"housewarming\" | \"other\"\n\nexport async function getUserGiftRegistries(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registries\")\n    .select(`\n      id, name, event_type, event_date, status, share_token, created_at,\n      gift_registry_items (count)\n    `)\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function getGiftRegistryById(registryId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registries\")\n    .select(`\n      *,\n      gift_registry_items (\n        id, quantity_desired, quantity_purchased, priority, notes,\n        product:products (\n          id, slug, nombre_comercial, precio, imagen_principal_url\n        )\n      )\n    `)\n    .eq(\"id\", registryId)\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function getGiftRegistryByToken(shareToken: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registries\")\n    .select(`\n      id, name, event_type, event_date, description, partner_name, cover_image_url, status,\n      gift_registry_items (\n        id, quantity_desired, quantity_purchased, priority, notes,\n        product:products (\n          id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia\n        )\n      )\n    `)\n    .eq(\"share_token\", shareToken)\n    .eq(\"status\", \"active\")\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function searchGiftRegistries(query: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registries\")\n    .select(\"id, name, event_type, event_date, partner_name, share_token\")\n    .eq(\"is_searchable\", true)\n    .eq(\"status\", \"active\")\n    .ilike(\"name\", `%${query}%`)\n    .limit(20)\n\n  if (error) throw error\n  return data\n}\n\nexport async function createGiftRegistry(\n  userId: string,\n  data: {\n    name: string\n    event_type?: GiftRegistryEventType\n    event_date?: string\n    description?: string\n    partner_name?: string\n    notification_email?: string\n  }\n) {\n  const supabase = await createClient()\n  const shareToken = crypto.randomUUID().replace(/-/g, \"\")\n  const eventDate = data.event_date ? new Date(data.event_date) : null\n  const expiresAt = eventDate ? new Date(eventDate.getTime() + 60 * 24 * 60 * 60 * 1000) : null // 60 días después\n\n  const { data: registry, error } = await supabase\n    .from(\"gift_registries\")\n    .insert({\n      user_id: userId,\n      name: data.name,\n      event_type: data.event_type || \"wedding\",\n      event_date: data.event_date,\n      description: data.description,\n      partner_name: data.partner_name,\n      notification_email: data.notification_email,\n      share_token: shareToken,\n      expires_at: expiresAt?.toISOString(),\n    })\n    .select()\n    .single()\n\n  if (error) throw error\n  return registry\n}\n\nexport async function addToGiftRegistry(registryId: string, productId: string, quantityDesired = 1, notes?: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registry_items\")\n    .insert({ registry_id: registryId, product_id: productId, quantity_desired: quantityDesired, notes })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function purchaseGiftRegistryItem(\n  registryItemId: string,\n  buyer: { name: string; email?: string; message?: string; is_anonymous?: boolean },\n  quantity: number,\n  orderId?: string\n) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"gift_registry_purchases\")\n    .insert({\n      registry_item_id: registryItemId,\n      buyer_name: buyer.name,\n      buyer_email: buyer.email,\n      buyer_message: buyer.message,\n      is_anonymous: buyer.is_anonymous || false,\n      quantity,\n      order_id: orderId,\n    })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\n// =============================================================================\n// SHIPPING ADDRESSES\n// =============================================================================\n\nexport async function getUserAddresses(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"shipping_addresses\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .order(\"is_default\", { ascending: false })\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function getDefaultAddress(userId: string) {\n  const supabase = await createClient()\n  const { data } = await supabase\n    .from(\"shipping_addresses\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .eq(\"is_default\", true)\n    .single()\n\n  return data\n}\n\nexport async function createAddress(\n  userId: string,\n  address: {\n    label: string\n    full_name: string\n    phone?: string\n    address_line1: string\n    address_line2?: string\n    city: string\n    state: string\n    postal_code?: string\n    country?: string\n    is_default?: boolean\n  }\n) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"shipping_addresses\")\n    .insert({ user_id: userId, ...address })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function updateAddress(addressId: string, updates: Partial<{\n  label: string\n  full_name: string\n  phone: string\n  address_line1: string\n  address_line2: string\n  city: string\n  state: string\n  postal_code: string\n  country: string\n  is_default: boolean\n}>) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"shipping_addresses\")\n    .update(updates)\n    .eq(\"id\", addressId)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function deleteAddress(addressId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase.from(\"shipping_addresses\").delete().eq(\"id\", addressId)\n  if (error) throw error\n}\n\n// =============================================================================\n// ORDER TRACKING\n// =============================================================================\n\nexport async function getOrderTracking(orderId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"order_tracking_history\")\n    .select(\"*\")\n    .eq(\"order_id\", orderId)\n    .order(\"occurred_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function getCarriers() {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"carriers\")\n    .select(\"*\")\n    .eq(\"is_active\", true)\n    .order(\"name\")\n\n  if (error) throw error\n  return data\n}\n\nexport async function addTrackingEvent(\n  orderId: string,\n  event: {\n    status: string\n    status_description?: string\n    location?: string\n    occurred_at: string\n  }\n) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"order_tracking_history\")\n    .insert({ order_id: orderId, ...event })\n    .select()\n    .single()\n\n  if (error) throw error\n\n  // Actualizar last_tracking_update en la orden\n  await supabase.from(\"orders\").update({ last_tracking_update: new Date().toISOString() }).eq(\"id\", orderId)\n\n  return data\n}\n\n// =============================================================================\n// PRODUCT REVIEWS\n// =============================================================================\n\nexport async function getProductReviews(productId: string, limit = 10, offset = 0) {\n  const supabase = await createClient()\n  const { data, error, count } = await supabase\n    .from(\"product_reviews\")\n    .select(`\n      id, rating, title, review_text, images, is_verified_purchase, \n      helpful_count, not_helpful_count, created_at,\n      user:user_profiles (full_name)\n    `, { count: \"exact\" })\n    .eq(\"product_id\", productId)\n    .eq(\"is_approved\", true)\n    .order(\"created_at\", { ascending: false })\n    .range(offset, offset + limit - 1)\n\n  if (error) throw error\n  return { reviews: data, total: count }\n}\n\nexport async function getProductRatingStats(productId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"product_reviews\")\n    .select(\"rating\")\n    .eq(\"product_id\", productId)\n    .eq(\"is_approved\", true)\n\n  if (error) throw error\n\n  if (!data || data.length === 0) {\n    return { average: 0, total: 0, distribution: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 } }\n  }\n\n  const distribution = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }\n  let total = 0\n  data.forEach((r) => {\n    distribution[r.rating as keyof typeof distribution]++\n    total += r.rating\n  })\n\n  return {\n    average: Math.round((total / data.length) * 10) / 10,\n    total: data.length,\n    distribution,\n  }\n}\n\nexport async function createReview(\n  userId: string,\n  productId: string,\n  review: {\n    rating: number\n    title?: string\n    review_text?: string\n    images?: string[]\n    order_id?: string\n  }\n) {\n  const supabase = await createClient()\n  const isVerifiedPurchase = !!review.order_id\n\n  const { data, error } = await supabase\n    .from(\"product_reviews\")\n    .insert({\n      user_id: userId,\n      product_id: productId,\n      rating: review.rating,\n      title: review.title,\n      review_text: review.review_text,\n      images: review.images || [],\n      order_id: review.order_id,\n      is_verified_purchase: isVerifiedPurchase,\n    })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function voteReview(userId: string, reviewId: string, isHelpful: boolean) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"review_votes\")\n    .upsert({ user_id: userId, review_id: reviewId, is_helpful: isHelpful }, { onConflict: \"review_id,user_id\" })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\n// =============================================================================\n// RECENTLY VIEWED\n// =============================================================================\n\nexport async function trackProductView(userId: string, productId: string) {\n  const supabase = await createClient()\n  await supabase.rpc(\"upsert_recently_viewed\", { p_user_id: userId, p_product_id: productId })\n}\n\nexport async function getRecentlyViewed(userId: string, limit = 12) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"recently_viewed_products\")\n    .select(`\n      viewed_at,\n      product:products (\n        id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia\n      )\n    `)\n    .eq(\"user_id\", userId)\n    .order(\"viewed_at\", { ascending: false })\n    .limit(limit)\n\n  if (error) throw error\n  return data\n}\n\n// =============================================================================\n// PRICE & STOCK ALERTS\n// =============================================================================\n\nexport async function createPriceAlert(userId: string, productId: string, targetPrice: number, originalPrice: number) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"price_alerts\")\n    .upsert(\n      { user_id: userId, product_id: productId, target_price: targetPrice, original_price: originalPrice, is_active: true },\n      { onConflict: \"user_id,product_id\" }\n    )\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function createStockAlert(userId: string, productId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"stock_alerts\")\n    .upsert({ user_id: userId, product_id: productId, is_active: true }, { onConflict: \"user_id,product_id\" })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function getUserAlerts(userId: string) {\n  const supabase = await createClient()\n  const [priceAlerts, stockAlerts] = await Promise.all([\n    supabase\n      .from(\"price_alerts\")\n      .select(`*, product:products (id, slug, nombre_comercial, precio, imagen_principal_url)`)\n      .eq(\"user_id\", userId)\n      .eq(\"is_active\", true),\n    supabase\n      .from(\"stock_alerts\")\n      .select(`*, product:products (id, slug, nombre_comercial, precio, imagen_principal_url, upp_existencia)`)\n      .eq(\"user_id\", userId)\n      .eq(\"is_active\", true),\n  ])\n\n  return {\n    priceAlerts: priceAlerts.data || [],\n    stockAlerts: stockAlerts.data || [],\n  }\n}\n\nexport async function deleteAlert(type: \"price\" | \"stock\", alertId: string) {\n  const supabase = await createClient()\n  const table = type === \"price\" ? \"price_alerts\" : \"stock_alerts\"\n  const { error } = await supabase.from(table).delete().eq(\"id\", alertId)\n  if (error) throw error\n}\n\n// =============================================================================\n// LOYALTY POINTS\n// =============================================================================\n\nexport async function getUserLoyaltyPoints(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"loyalty_points\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .single()\n\n  if (error && error.code !== \"PGRST116\") throw error\n  return data || { total_points: 0, available_points: 0, pending_points: 0, redeemed_points: 0, tier: \"bronze\" }\n}\n\nexport async function getLoyaltyTransactions(userId: string, limit = 20) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"loyalty_transactions\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n    .limit(limit)\n\n  if (error) throw error\n  return data\n}\n\nexport async function getLoyaltyConfig() {\n  const supabase = await createClient()\n  const { data, error } = await supabase.from(\"loyalty_config\").select(\"*\").single()\n  if (error) throw error\n  return data\n}\n\n// =============================================================================\n// NOTIFICATIONS\n// =============================================================================\n\nexport async function getUserNotifications(userId: string, limit = 20, unreadOnly = false) {\n  const supabase = await createClient()\n  let query = supabase\n    .from(\"user_notifications\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n    .limit(limit)\n\n  if (unreadOnly) {\n    query = query.eq(\"is_read\", false)\n  }\n\n  const { data, error } = await query\n  if (error) throw error\n  return data\n}\n\nexport async function getUnreadNotificationCount(userId: string) {\n  const supabase = await createClient()\n  const { count, error } = await supabase\n    .from(\"user_notifications\")\n    .select(\"*\", { count: \"exact\", head: true })\n    .eq(\"user_id\", userId)\n    .eq(\"is_read\", false)\n\n  if (error) throw error\n  return count || 0\n}\n\nexport async function markNotificationAsRead(notificationId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase\n    .from(\"user_notifications\")\n    .update({ is_read: true, read_at: new Date().toISOString() })\n    .eq(\"id\", notificationId)\n\n  if (error) throw error\n}\n\nexport async function markAllNotificationsAsRead(userId: string) {\n  const supabase = await createClient()\n  const { error } = await supabase\n    .from(\"user_notifications\")\n    .update({ is_read: true, read_at: new Date().toISOString() })\n    .eq(\"user_id\", userId)\n    .eq(\"is_read\", false)\n\n  if (error) throw error\n}\n\nexport async function getNotificationPreferences(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"notification_preferences\")\n    .select(\"*\")\n    .eq(\"user_id\", userId)\n    .single()\n\n  if (error && error.code !== \"PGRST116\") throw error\n  return data || {\n    email_order_updates: true,\n    email_price_alerts: true,\n    email_stock_alerts: true,\n    email_gift_purchases: true,\n    email_promotions: false,\n    email_newsletter: false,\n    push_enabled: false,\n  }\n}\n\nexport async function updateNotificationPreferences(userId: string, preferences: Partial<{\n  email_order_updates: boolean\n  email_price_alerts: boolean\n  email_stock_alerts: boolean\n  email_gift_purchases: boolean\n  email_promotions: boolean\n  email_newsletter: boolean\n  push_enabled: boolean\n}>) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"notification_preferences\")\n    .upsert({ user_id: userId, ...preferences }, { onConflict: \"user_id\" })\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\n// =============================================================================\n// ORDERS (para historial)\n// =============================================================================\n\nexport async function getUserOrders(userId: string, status?: string) {\n  const supabase = await createClient()\n  let query = supabase\n    .from(\"orders\")\n    .select(`\n      *,\n      carrier:carriers (name, tracking_url_template)\n    `)\n    .eq(\"user_id\", userId)\n    .order(\"created_at\", { ascending: false })\n\n  if (status) {\n    query = query.eq(\"status\", status)\n  }\n\n  const { data, error } = await query\n  if (error) throw error\n  return data\n}\n\nexport async function getActiveOrders(userId: string) {\n  const supabase = await createClient()\n  const { data, error } = await supabase\n    .from(\"orders\")\n    .select(`\n      *,\n      carrier:carriers (name, tracking_url_template),\n      order_tracking_history (status, status_description, location, occurred_at)\n    `)\n    .eq(\"user_id\", userId)\n    .in(\"status\", [\"pending\", \"confirmed\", \"processing\", \"shipped\"])\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return data\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 652, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///Users/jrbuenaventura/Windsurf/Mesanova/app/listas/page.tsx"],"sourcesContent":["import { searchGiftRegistries } from \"@/lib/db/user-features\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Gift, Search, Calendar, ExternalLink } from \"lucide-react\"\nimport Link from \"next/link\"\n\nconst eventTypeLabels: Record<string, string> = {\n  wedding: \"Boda\",\n  baby_shower: \"Baby Shower\",\n  birthday: \"Cumpleaños\",\n  housewarming: \"Inauguración\",\n  other: \"Otro\",\n}\n\nexport default async function BuscarListasPage({\n  searchParams,\n}: {\n  searchParams: { q?: string }\n}) {\n  const query = searchParams.q || \"\"\n  const registries = query ? await searchGiftRegistries(query) : []\n\n  const formatDate = (date: string) => {\n    return new Date(date).toLocaleDateString(\"es-CO\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    })\n  }\n\n  return (\n    <div className=\"min-h-screen bg-muted/30\">\n      {/* Header */}\n      <div className=\"bg-background border-b\">\n        <div className=\"container max-w-4xl py-12 px-4 text-center\">\n          <Gift className=\"h-12 w-12 mx-auto text-primary mb-4\" />\n          <h1 className=\"text-4xl font-bold mb-2\">Buscar Lista de Regalos</h1>\n          <p className=\"text-muted-foreground mb-8\">\n            Encuentra la lista de bodas, baby shower o evento especial de tus amigos\n          </p>\n\n          <form action=\"/listas\" method=\"GET\" className=\"max-w-md mx-auto\">\n            <div className=\"flex gap-2\">\n              <Input\n                name=\"q\"\n                placeholder=\"Buscar por nombre...\"\n                defaultValue={query}\n                className=\"flex-1\"\n              />\n              <Button type=\"submit\">\n                <Search className=\"h-4 w-4 mr-2\" />\n                Buscar\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* Results */}\n      <div className=\"container max-w-4xl py-8 px-4\">\n        {query && (\n          <p className=\"text-muted-foreground mb-6\">\n            {registries.length} resultado{registries.length !== 1 ? \"s\" : \"\"} para \"{query}\"\n          </p>\n        )}\n\n        {query && registries.length === 0 ? (\n          <Card className=\"p-12 text-center\">\n            <Gift className=\"h-16 w-16 mx-auto text-muted-foreground/50 mb-4\" />\n            <h2 className=\"text-xl font-semibold mb-2\">No encontramos listas</h2>\n            <p className=\"text-muted-foreground\">\n              Intenta con otro nombre o verifica la ortografía\n            </p>\n          </Card>\n        ) : query ? (\n          <div className=\"space-y-4\">\n            {registries.map((registry: any) => (\n              <Card key={registry.id} className=\"hover:border-primary/50 transition-colors\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <Badge variant=\"outline\">\n                          {eventTypeLabels[registry.event_type] || \"Evento\"}\n                        </Badge>\n                      </div>\n                      <h2 className=\"text-xl font-semibold mb-1\">{registry.name}</h2>\n                      {registry.partner_name && (\n                        <p className=\"text-muted-foreground\">& {registry.partner_name}</p>\n                      )}\n                      {registry.event_date && (\n                        <p className=\"flex items-center gap-1 text-sm text-muted-foreground mt-2\">\n                          <Calendar className=\"h-4 w-4\" />\n                          {formatDate(registry.event_date)}\n                        </p>\n                      )}\n                    </div>\n                    <Button asChild>\n                      <Link href={`/lista/${registry.share_token}`}>\n                        Ver Lista\n                        <ExternalLink className=\"h-4 w-4 ml-2\" />\n                      </Link>\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <Card className=\"p-12 text-center\">\n            <Search className=\"h-16 w-16 mx-auto text-muted-foreground/50 mb-4\" />\n            <h2 className=\"text-xl font-semibold mb-2\">Busca una lista</h2>\n            <p className=\"text-muted-foreground\">\n              Ingresa el nombre de la lista o de los anfitriones para encontrarla\n            </p>\n          </Card>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AAEA,MAAM,kBAA0C;IAC9C,SAAS;IACT,aAAa;IACb,UAAU;IACV,cAAc;IACd,OAAO;AACT;AAEe,eAAe,iBAAiB,EAC7C,YAAY,EAGb;IACC,MAAM,QAAQ,aAAa,CAAC,IAAI;IAChC,MAAM,aAAa,QAAQ,MAAM,IAAA,qJAAoB,EAAC,SAAS,EAAE;IAEjE,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;YAChD,MAAM;YACN,OAAO;YACP,KAAK;QACP;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,0MAAI;4BAAC,WAAU;;;;;;sCAChB,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,8OAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAI1C,8OAAC;4BAAK,QAAO;4BAAU,QAAO;4BAAM,WAAU;sCAC5C,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,mIAAK;wCACJ,MAAK;wCACL,aAAY;wCACZ,cAAc;wCACd,WAAU;;;;;;kDAEZ,8OAAC,qIAAM;wCAAC,MAAK;;0DACX,8OAAC,gNAAM;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS7C,8OAAC;gBAAI,WAAU;;oBACZ,uBACC,8OAAC;wBAAE,WAAU;;4BACV,WAAW,MAAM;4BAAC;4BAAW,WAAW,MAAM,KAAK,IAAI,MAAM;4BAAG;4BAAQ;4BAAM;;;;;;;oBAIlF,SAAS,WAAW,MAAM,KAAK,kBAC9B,8OAAC,iIAAI;wBAAC,WAAU;;0CACd,8OAAC,0MAAI;gCAAC,WAAU;;;;;;0CAChB,8OAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAC3C,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;+BAIrC,sBACF,8OAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,yBACf,8OAAC,iIAAI;gCAAmB,WAAU;0CAChC,cAAA,8OAAC,wIAAW;oCAAC,WAAU;8CACrB,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC,mIAAK;4DAAC,SAAQ;sEACZ,eAAe,CAAC,SAAS,UAAU,CAAC,IAAI;;;;;;;;;;;kEAG7C,8OAAC;wDAAG,WAAU;kEAA8B,SAAS,IAAI;;;;;;oDACxD,SAAS,YAAY,kBACpB,8OAAC;wDAAE,WAAU;;4DAAwB;4DAAG,SAAS,YAAY;;;;;;;oDAE9D,SAAS,UAAU,kBAClB,8OAAC;wDAAE,WAAU;;0EACX,8OAAC,sNAAQ;gEAAC,WAAU;;;;;;4DACnB,WAAW,SAAS,UAAU;;;;;;;;;;;;;0DAIrC,8OAAC,qIAAM;gDAAC,OAAO;0DACb,cAAA,8OAAC,0LAAI;oDAAC,MAAM,CAAC,OAAO,EAAE,SAAS,WAAW,EAAE;;wDAAE;sEAE5C,8OAAC,sOAAY;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAvBvB,SAAS,EAAE;;;;;;;;;6CAgC1B,8OAAC,iIAAI;wBAAC,WAAU;;0CACd,8OAAC,gNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAC3C,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;;;;;;;AAQjD"}}]
}