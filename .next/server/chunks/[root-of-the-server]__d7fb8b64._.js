module.exports=[918622,(e,a,t)=>{a.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,a,t)=>{a.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,a,t)=>{a.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,a,t)=>{a.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},270406,(e,a,t)=>{a.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},193695,(e,a,t)=>{a.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},442315,(e,a,t)=>{"use strict";a.exports=e.r(918622)},347540,(e,a,t)=>{"use strict";a.exports=e.r(442315).vendored["react-rsc"].React},188248,e=>{"use strict";let a=["Ref","Cod_Barra","Producto","Descripcion","Marca","Precio_COP","Descuento","Existencia_inv","Pedido_en_camino","Descontinuado","Inner_pack","Outer_pack","Coleccion","Categoria","Subcategoria","Tipo_producto","Material","Color","Dimensiones","Peso_kg","Capacidad","Pais_origen","Descrip_Cliente_Final","Momentos_Uso_Cliente","Productos_Afines_Cliente","Descrip_Distribuidor","Argumentos_Venta_Distribuidor","Ubicacion_Tienda_Distribuidor","Margen_Sugerido","Rotacion_Esperada","SEO_Title","SEO_Description","Tags","Video_URL","Ficha_Tecnica_URL","Fecha_Lanzamiento","Image_1","Image_2","Image_3","Image_4","Image_5","Image_6","Image_7","Image_8","Image_9","Image_10"],t={Ref:"Código de referencia único del producto (obligatorio)",Cod_Barra:"Código de barras EAN/UPC",Producto:"Nombre comercial del producto (obligatorio)",Descripcion:"Descripción corta o subtítulo",Marca:"Marca del producto",Precio_COP:"Precio base en pesos colombianos (obligatorio)",Descuento:"Porcentaje de descuento (0-100). Si > 0, aparece en ofertas",Existencia_inv:"Cantidad en inventario",Pedido_en_camino:"SI/NO - Indica si hay pedido en tránsito",Descontinuado:"SI/NO - Producto que no se volverá a pedir",Inner_pack:"Empaque primario (unidades por empaque)",Outer_pack:"Empaque secundario (empaques primarios por caja)",Coleccion:"Nombre de la colección a la que pertenece",Categoria:"Categoría principal (Cocina, Mesa, Café-Té-Bar, Termos-Neveras, HoReCa)",Subcategoria:"Subcategoría dentro de la categoría principal",Tipo_producto:"Tipo específico de producto (3er nivel)",Material:"Material principal del producto",Color:"Color del producto",Dimensiones:"Dimensiones del producto (ej: 30x20x10 cm)",Peso_kg:"Peso en kilogramos",Capacidad:"Capacidad si aplica (ej: 500ml)",Pais_origen:"País de origen del producto",Descrip_Cliente_Final:"Descripción amplia para cliente final",Momentos_Uso_Cliente:"Momentos de uso sugeridos para cliente final",Productos_Afines_Cliente:"Referencias de productos afines separadas por coma",Descrip_Distribuidor:"Descripción visible solo para distribuidores y canal",Argumentos_Venta_Distribuidor:"Argumentos de venta para distribuidores",Ubicacion_Tienda_Distribuidor:"Sugerencia de ubicación en tienda del distribuidor",Margen_Sugerido:"Margen de ganancia sugerido para distribuidor (%)",Rotacion_Esperada:"Rotación esperada: alta, media o baja",SEO_Title:"Título SEO para buscadores",SEO_Description:"Descripción SEO para buscadores",Tags:"Etiquetas de búsqueda separadas por coma",Video_URL:"URL del video del producto",Ficha_Tecnica_URL:"URL del PDF de ficha técnica",Fecha_Lanzamiento:"Fecha de lanzamiento (YYYY-MM-DD)",Image_1:"URL de imagen principal (obligatoria)",Image_2:"URL de imagen 2",Image_3:"URL de imagen 3",Image_4:"URL de imagen 4",Image_5:"URL de imagen 5",Image_6:"URL de imagen 6",Image_7:"URL de imagen 7",Image_8:"URL de imagen 8",Image_9:"URL de imagen 9",Image_10:"URL de imagen 10"};function r(){return a.join(",")}function o(){let e,r=a.join(","),o=a.map(e=>`"${t[e]}"`).join(","),i=(e={Ref:"ABC-001",Cod_Barra:"7701234567890",Producto:"Tabla de Cortar Bambú Premium",Descripcion:"Tabla de cortar profesional en bambú ecológico",Marca:"Mesa Nova",Precio_COP:"89900",Descuento:"15",Existencia_inv:"150",Pedido_en_camino:"NO",Descontinuado:"NO",Inner_pack:"1",Outer_pack:"12",Coleccion:"Eco Kitchen",Categoria:"Cocina",Subcategoria:"Corte y Picado",Tipo_producto:"Tablas de Cortar",Material:"Bambú",Color:"Natural",Dimensiones:"40x30x2 cm",Peso_kg:"0.8",Capacidad:"",Pais_origen:"China",Descrip_Cliente_Final:"Tabla de cortar elaborada en bambú 100% natural...",Momentos_Uso_Cliente:"Ideal para preparar tus comidas diarias...",Productos_Afines_Cliente:"ABC-002,ABC-003",Descrip_Distribuidor:"Producto de alta rotación con excelente margen...",Argumentos_Venta_Distribuidor:"Material ecológico muy demandado...",Ubicacion_Tienda_Distribuidor:"Zona de cocina cerca de cuchillos",Margen_Sugerido:"40",Rotacion_Esperada:"alta",SEO_Title:"Tabla de Cortar Bambú | Mesa Nova",SEO_Description:"Compra tabla de cortar en bambú ecológico...",Tags:"tabla,cortar,bambú,cocina,ecológico",Video_URL:"https://youtube.com/watch?v=xxx",Ficha_Tecnica_URL:"https://cdn.mesanova.com/fichas/abc-001.pdf",Fecha_Lanzamiento:"2026-01-15",Image_1:"https://cdn.mesanova.com/products/abc-001-1.jpg",Image_2:"https://cdn.mesanova.com/products/abc-001-2.jpg",Image_3:"",Image_4:"",Image_5:"",Image_6:"",Image_7:"",Image_8:"",Image_9:"",Image_10:""},a.map(a=>{let t=e[a]||"";return t.includes(",")||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(","));return`${r}
${o}
${i}`}e.s(["BOOLEAN_FIELDS",0,["Pedido_en_camino","Descontinuado"],"CSV_HEADERS",0,a,"CSV_HEADER_DESCRIPTIONS",0,t,"NUMERIC_FIELDS",0,["Precio_COP","Descuento","Existencia_inv","Peso_kg","Margen_Sugerido"],"REQUIRED_FIELDS",0,["Ref","Producto","Precio_COP"],"VALID_CATEGORIES",0,["Cocina","Mesa","Café-Té-Bar","Termos-Neveras","HoReCa"],"VALID_ROTACION",0,["alta","media","baja"],"generateCSVWithDescriptions",()=>o,"generateEmptyCSVTemplate",()=>r])},731672,e=>{"use strict";var a=e.i(747909),t=e.i(174017),r=e.i(996250),o=e.i(759756),i=e.i(561916),n=e.i(114444),s=e.i(837092),c=e.i(869741),d=e.i(316795),l=e.i(487718),u=e.i(995169),p=e.i(47587),g=e.i(666012),m=e.i(570101),_=e.i(626937),R=e.i(10372),h=e.i(193695);e.i(52474);var C=e.i(257297),v=e.i(89171),b=e.i(89660),x=e.i(476889),E=e.i(178805);async function f(e){try{let a=await (0,b.createClient)(),{data:{user:t},error:r}=await a.auth.getUser();if(r||!t)return v.NextResponse.json({error:"No autorizado"},{status:401});let{data:o}=await a.from("user_profiles").select("role").eq("id",t.id).single();if(o?.role!=="superadmin")return v.NextResponse.json({error:"No autorizado"},{status:403});let i=(await e.formData()).get("file");if(!i)return v.NextResponse.json({error:"No se proporcionó archivo"},{status:400});let n=await i.text(),s=(0,x.parseCSV)(n),c=await (0,E.getExistingProductsMap)(a),d=(0,x.compareWithExisting)(s.products,c),l={total:s.totalRows,valid:s.validRows,invalid:s.invalidRows,toCreate:d.filter(e=>"create"===e.changeType).length,toUpdate:d.filter(e=>"update"===e.changeType).length,unchanged:d.filter(e=>"unchanged"===e.changeType).length};return v.NextResponse.json({success:s.success,stats:l,globalErrors:s.globalErrors,products:s.products.slice(0,100),diffs:d.slice(0,100),hasMore:s.products.length>100})}catch(e){return console.error("Error validando CSV:",e),v.NextResponse.json({error:"Error al validar archivo CSV"},{status:500})}}e.s(["POST",()=>f],703513);var P=e.i(703513);let D=new a.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/products/csv/validate/route",pathname:"/api/products/csv/validate",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/products/csv/validate/route.ts",nextConfigOutput:"",userland:P}),{workAsyncStorage:I,workUnitAsyncStorage:T,serverHooks:S}=D;function w(){return(0,r.patchFetch)({workAsyncStorage:I,workUnitAsyncStorage:T})}async function O(e,a,r){D.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/products/csv/validate/route";v=v.replace(/\/index$/,"")||"/";let b=await D.prepare(e,a,{srcPage:v,multiZoneDraftMode:!1});if(!b)return a.statusCode=400,a.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:x,params:E,nextConfig:f,parsedUrl:P,isDraftMode:I,prerenderManifest:T,routerServerContext:S,isOnDemandRevalidate:w,revalidateOnlyGenerated:O,resolvedPathname:A,clientReferenceManifest:N,serverActionsManifest:y}=b,U=(0,c.normalizeAppPath)(v),M=!!(T.dynamicRoutes[U]||T.routes[A]),j=async()=>((null==S?void 0:S.render404)?await S.render404(e,a,P,!1):a.end("This page could not be found"),null);if(M&&!I){let e=!!T.routes[A],a=T.dynamicRoutes[U];if(a&&!1===a.fallback&&!e){if(f.experimental.adapterPath)return await j();throw new h.NoFallbackError}}let k=null;!M||D.isDev||I||(k="/index"===(k=A)?"/":k);let L=!0===D.isDev||!M,q=M&&!L;y&&N&&(0,n.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:N,serverActionsManifest:y,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:y})});let F=e.method||"GET",H=(0,i.getTracer)(),V=H.getActiveScopeSpan(),B={params:E,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!f.experimental.authInterrupts},cacheComponents:!!f.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:f.cacheLife,waitUntil:r.waitUntil,onClose:e=>{a.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(a,t,r)=>D.onRequestError(e,a,r,S)},sharedContext:{buildId:x}},$=new d.NodeNextRequest(e),K=new d.NodeNextResponse(a),z=l.NextRequestAdapter.fromNodeNextRequest($,(0,l.signalFromNodeResponse)(a));try{let n=async e=>D.handle(z,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":a.statusCode,"next.rsc":!1});let t=H.getRootSpanAttributes();if(!t)return;if(t.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${t.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=t.get("next.route");if(r){let a=`${F} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":a}),e.updateName(a)}else e.updateName(`${F} ${v}`)}),s=!!(0,o.getRequestMeta)(e,"minimalMode"),c=async o=>{var i,c;let d=async({previousCacheEntry:t})=>{try{if(!s&&w&&O&&!t)return a.statusCode=404,a.setHeader("x-nextjs-cache","REVALIDATED"),a.end("This page could not be found"),null;let i=await n(o);e.fetchMetrics=B.renderOpts.fetchMetrics;let c=B.renderOpts.pendingWaitUntil;c&&r.waitUntil&&(r.waitUntil(c),c=void 0);let d=B.renderOpts.collectedTags;if(!M)return await (0,g.sendResponse)($,K,i,B.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),a=(0,m.toNodeOutgoingHttpHeaders)(i.headers);d&&(a[R.NEXT_CACHE_TAGS_HEADER]=d),!a["content-type"]&&e.type&&(a["content-type"]=e.type);let t=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=R.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,r=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=R.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:C.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:a},cacheControl:{revalidate:t,expire:r}}}}catch(a){throw(null==t?void 0:t.isStale)&&await D.onRequestError(e,a,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:w})},S),a}},l=await D.handleResponse({req:e,nextConfig:f,cacheKey:k,routeKind:t.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:w,revalidateOnlyGenerated:O,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:s});if(!M)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==C.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(c=l.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||a.setHeader("x-nextjs-cache",w?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),I&&a.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,m.fromNodeOutgoingHttpHeaders)(l.value.headers);return s&&M||u.delete(R.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||a.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,_.getCacheControlHeader)(l.cacheControl)),await (0,g.sendResponse)($,K,new Response(l.value.body,{headers:u,status:l.value.status||200})),null};V?await c(V):await H.withPropagatedContext(e.headers,()=>H.trace(u.BaseServerSpan.handleRequest,{spanName:`${F} ${v}`,kind:i.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},c))}catch(a){if(a instanceof h.NoFallbackError||await D.onRequestError(e,a,{routerKind:"App Router",routePath:U,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:w})}),M)throw a;return await (0,g.sendResponse)($,K,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>w,"routeModule",()=>D,"serverHooks",()=>S,"workAsyncStorage",()=>I,"workUnitAsyncStorage",()=>T],731672)},62689,e=>{e.v(e=>Promise.resolve().then(()=>e(188248)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d7fb8b64._.js.map