{"version":3,"sources":["../../../../components/admin/products-management.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\nimport { Label } from \"@/components/ui/label\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Search, MoreVertical, Pencil, Plus, Trash2, AlertTriangle, Package } from \"lucide-react\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport type { Product, Silo, Subcategory, Collection } from \"@/lib/db/types\"\n\ninterface ProductsManagementProps {\n  initialProducts: Product[]\n  silos: Silo[]\n  subcategories: Subcategory[]\n  collections: Collection[]\n}\n\nexport function ProductsManagement({ initialProducts, silos, subcategories, collections }: ProductsManagementProps) {\n  const router = useRouter()\n  const [products, setProducts] = useState(initialProducts)\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [filterMarca, setFilterMarca] = useState(\"all\")\n  const [filterColeccion, setFilterColeccion] = useState(\"all\")\n  const [filterCategoria, setFilterCategoria] = useState(\"all\")\n  const [filterEstado, setFilterEstado] = useState(\"all\")\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null)\n  const [priceDialogOpen, setPriceDialogOpen] = useState(false)\n  const [editPrice, setEditPrice] = useState(\"\")\n  const [editDiscount, setEditDiscount] = useState(\"0\")\n  const [isLoading, setIsLoading] = useState(false)\n\n  // Extraer marcas únicas\n  const marcas = Array.from(new Set(products.map(p => p.marca).filter((m): m is string => !!m))).sort()\n  \n  // Extraer colecciones únicas\n  const colecciones = Array.from(new Set(products.map(p => p.nombre_coleccion).filter((c): c is string => !!c))).sort()\n\n  // Filtrar productos por búsqueda y filtros\n  const filteredProducts = products.filter((product) => {\n    const term = searchTerm.toLowerCase()\n    const matchesSearch = !term || \n      product.pdt_codigo?.toLowerCase().includes(term) ||\n      product.pdt_descripcion?.toLowerCase().includes(term) ||\n      product.nombre_comercial?.toLowerCase().includes(term) ||\n      product.marca?.toLowerCase().includes(term)\n    \n    const matchesMarca = filterMarca === \"all\" || product.marca === filterMarca\n    const matchesColeccion = filterColeccion === \"all\" || product.nombre_coleccion === filterColeccion\n    const matchesCategoria = filterCategoria === \"all\" // TODO: implementar cuando tengamos categorías cargadas\n    \n    let matchesEstado = true\n    if (filterEstado === \"descontinuado\") matchesEstado = product.descontinuado === true\n    else if (filterEstado === \"pedido_camino\") matchesEstado = product.pedido_en_camino === true\n    else if (filterEstado === \"activo\") matchesEstado = product.is_active === true\n    else if (filterEstado === \"inactivo\") matchesEstado = product.is_active === false\n    \n    return matchesSearch && matchesMarca && matchesColeccion && matchesCategoria && matchesEstado\n  })\n\n  // Abrir dialog de edición de precio\n  const handleOpenPriceDialog = (product: Product) => {\n    setEditingProduct(product)\n    setEditPrice(product.precio?.toString() || \"0\")\n    setEditDiscount(product.descuento_porcentaje?.toString() || \"0\")\n    setPriceDialogOpen(true)\n  }\n\n  // Guardar precio y descuento\n  const handleSavePriceDiscount = async () => {\n    if (!editingProduct) return\n\n    setIsLoading(true)\n    const supabase = createClient()\n\n    const precio = Number.parseFloat(editPrice)\n    const descuento = Number.parseFloat(editDiscount)\n    const isOnSale = descuento > 0\n\n    const { error } = await supabase\n      .from(\"products\")\n      .update({\n        precio,\n        descuento_porcentaje: descuento,\n        is_on_sale: isOnSale,\n        updated_at: new Date().toISOString(),\n      })\n      .eq(\"id\", editingProduct.id)\n\n    if (error) {\n      console.error(\"[v0] Error updating price:\", error)\n      alert(\"Error al actualizar el precio\")\n    } else {\n      // Actualizar el estado local\n      setProducts((prev) => prev.map((p) => (p.id === editingProduct.id ? { ...p, precio, descuento_porcentaje: descuento, is_on_sale: isOnSale } : p)))\n      setPriceDialogOpen(false)\n      setEditingProduct(null)\n    }\n\n    setIsLoading(false)\n  }\n\n  // Eliminar producto\n  const handleDeleteProduct = async (productId: string) => {\n    if (!confirm(\"¿Estás seguro de que deseas eliminar este producto?\")) {\n      return\n    }\n\n    setIsLoading(true)\n    const supabase = createClient()\n\n    const { error } = await supabase.from(\"products\").delete().eq(\"id\", productId)\n\n    if (error) {\n      console.error(\"[v0] Error deleting product:\", error)\n      alert(\"Error al eliminar el producto\")\n    } else {\n      setProducts((prev) => prev.filter((p) => p.id !== productId))\n    }\n\n    setIsLoading(false)\n  }\n\n  // Calcular precio con descuento\n  const getPriceWithDiscount = (price: number, discount: number) => {\n    return price * (1 - discount / 100)\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Barra de búsqueda y acciones */}\n      <div className=\"flex flex-col gap-4\">\n        <div className=\"flex items-center gap-4\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n            <Input\n              placeholder=\"Buscar por SKU, descripción, nombre o marca...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n          <Button asChild>\n            <Link href=\"/admin/products/nuevo\">\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Agregar Producto\n            </Link>\n          </Button>\n        </div>\n        \n        {/* Filtros */}\n        <div className=\"flex flex-wrap items-center gap-3\">\n          <Select value={filterMarca} onValueChange={setFilterMarca}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Marca\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Todas las marcas</SelectItem>\n              {marcas.map(marca => (\n                <SelectItem key={marca} value={marca}>{marca}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          \n          <Select value={filterColeccion} onValueChange={setFilterColeccion}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Colección\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Todas las colecciones</SelectItem>\n              {colecciones.map(col => (\n                <SelectItem key={col} value={col}>{col}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          \n          <Select value={filterEstado} onValueChange={setFilterEstado}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Estado\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Todos los estados</SelectItem>\n              <SelectItem value=\"activo\">Activos</SelectItem>\n              <SelectItem value=\"inactivo\">Inactivos</SelectItem>\n              <SelectItem value=\"descontinuado\">Descontinuados</SelectItem>\n              <SelectItem value=\"pedido_camino\">Pedido en camino</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          {(filterMarca !== \"all\" || filterColeccion !== \"all\" || filterEstado !== \"all\") && (\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => {\n                setFilterMarca(\"all\")\n                setFilterColeccion(\"all\")\n                setFilterEstado(\"all\")\n              }}\n            >\n              Limpiar filtros\n            </Button>\n          )}\n          \n          <div className=\"ml-auto text-sm text-muted-foreground\">\n            {filteredProducts.length} de {products.length} productos\n          </div>\n        </div>\n      </div>\n\n      {/* Tabla de productos */}\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead className=\"w-[80px]\">Imagen</TableHead>\n              <TableHead>SKU</TableHead>\n              <TableHead>Producto</TableHead>\n              <TableHead>Marca</TableHead>\n              <TableHead>Colección</TableHead>\n              <TableHead>Precio</TableHead>\n              <TableHead>Descuento</TableHead>\n              <TableHead>Stock</TableHead>\n              <TableHead>Estado</TableHead>\n              <TableHead className=\"w-[80px]\">Acciones</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {filteredProducts.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={10} className=\"h-24 text-center\">\n                  No se encontraron productos.\n                </TableCell>\n              </TableRow>\n            ) : (\n              filteredProducts.map((product) => (\n                <TableRow key={product.id}>\n                  <TableCell>\n                    <div className=\"relative h-12 w-12 overflow-hidden rounded-md border\">\n                      {product.imagen_principal_url ? (\n                        <Image\n                          src={product.imagen_principal_url}\n                          alt={product.nombre_comercial || product.pdt_descripcion || \"Producto\"}\n                          fill\n                          className=\"object-cover\"\n                          unoptimized\n                          onError={(e) => {\n                            const target = e.target as HTMLImageElement\n                            target.style.display = 'none'\n                          }}\n                        />\n                      ) : (\n                        <div className=\"flex h-full w-full items-center justify-center bg-muted text-xs text-muted-foreground\">\n                          Sin imagen\n                        </div>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"font-mono text-sm\">{product.pdt_codigo}</TableCell>\n                  <TableCell>\n                    <div>\n                      <div className=\"font-medium\">{product.nombre_comercial || product.pdt_descripcion}</div>\n                      {product.nombre_comercial && (\n                        <div className=\"text-sm text-muted-foreground\">{product.pdt_descripcion}</div>\n                      )}\n                      <div className=\"flex gap-1 mt-1\">\n                        {product.descontinuado && (\n                          <Badge variant=\"destructive\" className=\"text-xs\">\n                            <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                            Descontinuado\n                          </Badge>\n                        )}\n                        {product.pedido_en_camino && (\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            <Package className=\"h-3 w-3 mr-1\" />\n                            En camino\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"text-sm\">{product.marca || \"-\"}</span>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"text-sm\">{product.nombre_coleccion || \"-\"}</span>\n                  </TableCell>\n                  <TableCell>\n                    {product.precio ? (\n                      <div className=\"font-medium\">${product.precio}</div>\n                    ) : (\n                      <span className=\"text-muted-foreground\">-</span>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {product.descuento_porcentaje && product.descuento_porcentaje > 0 ? (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {product.descuento_porcentaje}% OFF\n                      </Badge>\n                    ) : (\n                      <span className=\"text-muted-foreground\">-</span>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={product.upp_existencia > 0 ? \"default\" : \"secondary\"}>\n                      {product.upp_existencia}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={product.is_active ? \"default\" : \"secondary\"}>\n                      {product.is_active ? \"Activo\" : \"Inactivo\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\">\n                          <MoreVertical className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem onClick={() => handleOpenPriceDialog(product)}>\n                          <Pencil className=\"mr-2 h-4 w-4\" />\n                          Editar Precio y Descuento\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => router.push(`/admin/products/${product.id}/editar`)}>\n                          <Pencil className=\"mr-2 h-4 w-4\" />\n                          Edición Avanzada\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => handleDeleteProduct(product.id)} className=\"text-destructive\">\n                          <Trash2 className=\"mr-2 h-4 w-4\" />\n                          Eliminar\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Dialog de edición de precio y descuento */}\n      <Dialog open={priceDialogOpen} onOpenChange={setPriceDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Editar Precio y Descuento</DialogTitle>\n            <DialogDescription>{editingProduct?.nombre_comercial || editingProduct?.pdt_descripcion}</DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"price\">Precio ($)</Label>\n              <Input\n                id=\"price\"\n                type=\"number\"\n                step=\"0.01\"\n                value={editPrice}\n                onChange={(e) => setEditPrice(e.target.value)}\n                placeholder=\"0.00\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"discount\">Descuento (%)</Label>\n              <Input\n                id=\"discount\"\n                type=\"number\"\n                step=\"1\"\n                min=\"0\"\n                max=\"100\"\n                value={editDiscount}\n                onChange={(e) => setEditDiscount(e.target.value)}\n                placeholder=\"0\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Si el descuento es mayor que 0, el producto aparecerá en Ofertas\n              </p>\n            </div>\n            {Number.parseFloat(editDiscount) > 0 && Number.parseFloat(editPrice) > 0 && (\n              <div className=\"rounded-md bg-muted p-3\">\n                <div className=\"text-sm font-medium\">Precio con descuento:</div>\n                <div className=\"text-2xl font-bold text-primary\">\n                  $\n                  {getPriceWithDiscount(Number.parseFloat(editPrice), Number.parseFloat(editDiscount)).toLocaleString()}\n                </div>\n                <div className=\"text-sm text-muted-foreground line-through\">\n                  ${Number.parseFloat(editPrice).toLocaleString()}\n                </div>\n              </div>\n            )}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setPriceDialogOpen(false)} disabled={isLoading}>\n              Cancelar\n            </Button>\n            <Button onClick={handleSavePriceDiscount} disabled={isLoading}>\n              {isLoading ? \"Guardando...\" : \"Guardar Cambios\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAQA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAUO,SAAS,EAAmB,iBAAE,CAAe,OAAE,CAAK,eAAE,CAAa,aAAE,CAAW,CAA2B,EAChH,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACnC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,OACzC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,OACjD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,OACjD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,OAC3C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,MAC/D,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACrC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,KAC3C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGrC,EAAS,MAAM,IAAI,CAAC,IAAI,IAAI,EAAS,GAAG,CAAC,GAAK,EAAE,KAAK,EAAE,MAAM,CAAC,AAAC,GAAmB,CAAC,CAAC,KAAK,IAAI,GAG7F,EAAc,MAAM,IAAI,CAAC,IAAI,IAAI,EAAS,GAAG,CAAC,GAAK,EAAE,gBAAgB,EAAE,MAAM,CAAC,AAAC,GAAmB,CAAC,CAAC,KAAK,IAAI,GAG7G,EAAmB,EAAS,MAAM,CAAE,AAAD,IACvC,IAAM,EAAO,EAAW,WAAW,GAC7B,EAAgB,CAAC,GACrB,EAAQ,UAAU,EAAE,cAAc,SAAS,IAC3C,EAAQ,eAAe,EAAE,cAAc,SAAS,IAChD,EAAQ,gBAAgB,EAAE,cAAc,SAAS,IACjD,EAAQ,KAAK,EAAE,cAAc,SAAS,GAElC,EAA+B,QAAhB,GAAyB,EAAQ,KAAK,GAAK,EAC1D,EAAuC,QAApB,GAA6B,EAAQ,gBAAgB,GAAK,EAG/E,GAAgB,EAMpB,MALqB,kBAAjB,EAAkC,GAA0C,IAA1B,EAAQ,aAAa,CACjD,kBAAjB,EAAkC,EAA6C,AAA7B,OAAQ,gBAAgB,CACzD,WAAjB,EAA2B,EAAsC,KAAtB,EAAQ,SAAS,CAC3C,aAAjB,IAA6B,GAAsC,IAAtB,EAAQ,SAAc,AAAL,EAEhE,GAAiB,GAAgB,GARK,MAAM,EAA1B,GAQuD,CAClF,GAWM,EAZwD,AAY9B,UAC9B,GAAI,CAAC,EAAgB,OAErB,GAAa,GACb,IAAM,EAAW,CAAA,EAAA,EAAA,KAxB0F,OAwB1F,AAAY,IAEvB,EAAS,OAAO,UAAU,CAAC,GAC3B,EAAY,OAAO,UAAU,CAAC,GAC9B,EAAW,EAAY,EAEvB,OAAE,CAAK,CAAE,CAAG,MAAM,EACrB,IAAI,CAAC,YACL,MAAM,CAAC,CACN,SACA,qBAAsB,EACtB,WAAY,EACZ,WAAY,IAAI,OAAO,WAAW,EACpC,GACC,EAAE,CAAC,KAAM,EAAe,EAAE,EAEzB,GACF,IADS,IACD,KAAK,CAAC,6BAA8B,GAC5C,MAAM,mCAGN,EAAY,AAAC,GAAS,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAe,EAAE,CAAG,CAAE,GAAG,CAAC,QAAE,EAAQ,qBAAsB,EAAW,WAAY,CAAS,EAAI,IAC9I,GAAmB,GACnB,EAAkB,OAGpB,GAAa,EACf,EAGM,EAAsB,MAAO,IACjC,GAAI,CAAC,QAAQ,uDACX,CADmE,MAIrE,EAAa,IACb,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,KAAM,GAEhE,GACF,IADS,IACD,KAAK,CAAC,+BAAgC,GAC9C,MAAM,kCAEN,EAAY,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,IAGpD,EAAa,GACf,EAOA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,2EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,YAAY,iDACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAc,EAAE,MAAM,CAAC,KAAK,EAC7C,UAAU,aAGd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,kCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,2BAOvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAa,cAAe,YACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,qBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,YAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,qBACvB,EAAO,GAAG,CAAC,GACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAa,MAAO,WAAQ,GAAtB,UAKvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAiB,cAAe,YAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,qBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,gBAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,0BACvB,EAAY,GAAG,CAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAW,MAAO,WAAM,GAAlB,UAKvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAc,cAAe,YAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,qBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,aAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,sBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,kBAAS,YAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,oBAAW,cAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,yBAAgB,mBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,yBAAgB,2BAIrC,CAAiB,QAAhB,GAA6C,QAApB,GAA8C,QAAjB,CAAiB,CAAK,EAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,KACL,QAAS,KACP,EAAe,OACf,EAAmB,OACnB,EAAgB,MAClB,WACD,oBAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,EAAiB,MAAM,CAAC,OAAK,EAAS,MAAM,CAAC,sBAMpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oBAAW,WAChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,QACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,aACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oBAAW,kBAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACqB,IAA5B,EAAiB,MAAM,CACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,UACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,QAAS,GAAI,UAAU,4BAAmB,mCAKvD,EAAiB,GAAG,CAAE,AAAD,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACZ,EAAQ,oBAAoB,CAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,IAAK,EAAQ,oBAAoB,CACjC,IAAK,EAAQ,gBAAgB,EAAI,EAAQ,eAAe,EAAI,WAC5D,IAAI,CAAA,CAAA,EACJ,UAAU,eACV,WAAW,CAAA,CAAA,EACX,QAAS,AAAC,IACO,AACf,EADiB,MAAM,CAChB,KAAK,CAAC,OAAO,CAAG,MACzB,IAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGAAwF,mBAM7G,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,6BAAqB,EAAQ,UAAU,GAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAQ,gBAAgB,EAAI,EAAQ,eAAe,GAChF,EAAQ,gBAAgB,EACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAiC,EAAQ,eAAe,GAEzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACZ,EAAQ,aAAa,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,cAAc,UAAU,oBACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,iBAAiB,mBAI7C,EAAQ,gBAAgB,EACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,oBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,iBAAiB,uBAO9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAQ,KAAK,EAAI,QAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAQ,gBAAgB,EAAI,QAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACP,EAAQ,MAAM,CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAc,IAAE,EAAQ,MAAM,IAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,QAG5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACP,EAAQ,oBAAoB,EAAI,EAAQ,oBAAoB,CAAG,EAC9D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,oBAClC,EAAQ,oBAAoB,CAAC,WAGhC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,QAG5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAQ,cAAc,CAAG,EAAI,UAAY,qBACtD,EAAQ,cAAc,KAG3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAQ,SAAS,CAAG,UAAY,qBAC7C,EAAQ,SAAS,CAAG,SAAW,eAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,mBAAmB,CAAA,CAAC,OAAO,CAAA,CAAA,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,gBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,gBAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,mBAAmB,CAAA,CAAC,MAAM,gBACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,QAAS,IAAM,CAlQrD,KACA,EAAa,EAAQ,MAAM,EAAE,CADX,WACyB,KAC3C,EAAgB,AAgQ2D,EAhQnD,oBAAoB,EAAE,YAAc,KAC5D,EAAmB,eAgQG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,+BAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,EAAQ,EAAE,CAAC,OAAO,CAAC,YACjF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,sBAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,QAAS,IAAM,EAAoB,EAAQ,EAAE,EAAG,UAAU,6BAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,wBA9F9B,EAAQ,EAAE,UA4GnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAiB,aAAc,WAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAE,GAAgB,kBAAoB,GAAgB,qBAE1E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,eACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,QACH,KAAK,SACL,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,YAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,kBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACH,KAAK,SACL,KAAK,IACL,IAAI,IACJ,IAAI,MACJ,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,MAEd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,wEAI9C,OAAO,UAAU,CAAC,GAAgB,GAAK,OAAO,UAAU,CAAC,GAAa,GACrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAsB,0BACrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CAAkC,IAE9C,CAAqB,OAAO,UAAU,CAAC,IAjQtC,EAAI,AAiQ8C,OAAO,UAAU,CAAC,GAjQrD,GAAA,CAAG,EAiQiE,cAAc,MAErG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDAA6C,IACxD,OAAO,UAAU,CAAC,GAAW,cAAc,YAKrD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,GAAmB,GAAQ,SAAU,WAAW,aAGzF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAyB,SAAU,WACjD,EAAY,eAAiB,8BAO5C"}