module.exports=[826170,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(985811),e=a.i(39622),f=a.i(923665),g=a.i(424231),h=a.i(758042),i=a.i(994222),j=a.i(199738),k=(0,g.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:f.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:h.XAxis},{axisType:"yAxis",AxisComp:i.YAxis}],formatAxisMap:j.formatAxisMap}),l=a.i(54419),m=a.i(170106);let n=(0,m.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var o=a.i(177156);let p=(0,m.default)("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);var q=a.i(538784),r=a.i(724669),s=a.i(254161),t=a.i(340695),u=a.i(703130),v=a.i(887682),w=a.i(588237),x=a.i(621958),y=a.i(512959);let z={sessions:{label:"Sesiones",color:"hsl(var(--chart-1))"},users:{label:"Usuarios",color:"hsl(var(--chart-2))"},conversions:{label:"Conversiones",color:"hsl(var(--chart-3))"}};function A(a){return new Intl.NumberFormat("es-CO",{notation:"compact"}).format(a)}function B(){let[a,g]=(0,c.useState)("30d"),[j,m]=(0,c.useState)(0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(null);(0,c.useEffect)(()=>{let b=new AbortController;return(async()=>{E(!0),G(null);try{let c=await fetch(`/api/admin/analytics?preset=${a}`,{method:"GET",signal:b.signal,headers:{Accept:"application/json"}}),d=await c.json();if(!c.ok)throw Error(d?.error||`Error HTTP ${c.status}`);C(d)}catch(a){a?.name!=="AbortError"&&(G(a instanceof Error?a.message:"Error desconocido"),C(null))}finally{E(!1)}})(),()=>{b.abort()}},[a,j]);let H=(0,c.useMemo)(()=>B?.timeseries||[],[B]),I=(0,c.useMemo)(()=>B?.sources||[],[B]),J=(0,c.useMemo)(()=>B?.kpis||{sessions:0,users:0,conversions:0,conversionRate:0},[B]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Analíticas"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Resumen de tráfico y performance del sitio"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(v.Select,{value:a,onValueChange:a=>g(a),children:[(0,b.jsx)(v.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(v.SelectValue,{placeholder:"Rango"})}),(0,b.jsxs)(v.SelectContent,{children:[(0,b.jsx)(v.SelectItem,{value:"7d",children:"Últimos 7 días"}),(0,b.jsx)(v.SelectItem,{value:"30d",children:"Últimos 30 días"}),(0,b.jsx)(v.SelectItem,{value:"90d",children:"Últimos 90 días"})]})]}),(0,b.jsx)(t.Button,{variant:"outline",onClick:()=>m(a=>a+1),children:"Actualizar"})]})]}),F&&(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Error"}),(0,b.jsx)(u.CardDescription,{children:"No se pudo cargar analíticas desde GA4"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:F})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:A(J.sessions)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sesiones"})]}),(0,b.jsx)(n,{className:"h-7 w-7 text-muted-foreground"})]})})}),(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:A(J.users)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Usuarios"})]}),(0,b.jsx)(o.Eye,{className:"h-7 w-7 text-muted-foreground"})]})})}),(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:A(J.conversions)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Conversiones"})]}),(0,b.jsx)(q.ShoppingCart,{className:"h-7 w-7 text-muted-foreground"})]})})}),(0,b.jsx)(u.Card,{children:(0,b.jsx)(u.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[J.conversionRate.toFixed(2),"%"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tasa conversión"})]}),(0,b.jsx)(r.TrendingUp,{className:"h-7 w-7 text-muted-foreground"})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Tráfico"}),(0,b.jsx)(u.CardDescription,{children:"Sesiones y usuarios"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)(y.ChartContainer,{config:z,className:"h-[320px] w-full",children:(0,b.jsxs)(e.AreaChart,{data:H,margin:{left:8,right:8,top:12,bottom:0},children:[(0,b.jsx)(l.CartesianGrid,{vertical:!1}),(0,b.jsx)(h.XAxis,{dataKey:"day",tickLine:!1,axisLine:!1}),(0,b.jsx)(i.YAxis,{tickLine:!1,axisLine:!1,width:36}),(0,b.jsx)(y.ChartTooltip,{content:(0,b.jsx)(y.ChartTooltipContent,{})}),(0,b.jsx)(d.Area,{type:"monotone",dataKey:"sessions",fill:"var(--color-sessions)",stroke:"var(--color-sessions)",fillOpacity:.2}),(0,b.jsx)(d.Area,{type:"monotone",dataKey:"users",fill:"var(--color-users)",stroke:"var(--color-users)",fillOpacity:.15}),(0,b.jsx)(y.ChartLegend,{content:(0,b.jsx)(y.ChartLegendContent,{})})]})})})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Fuentes"}),(0,b.jsx)(u.CardDescription,{children:"Sesiones por canal"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)(y.ChartContainer,{config:{sessions:z.sessions},className:"h-[320px] w-full",children:(0,b.jsxs)(k,{data:I,margin:{left:8,right:8,top:12,bottom:0},children:[(0,b.jsx)(l.CartesianGrid,{vertical:!1}),(0,b.jsx)(h.XAxis,{dataKey:"source",tickLine:!1,axisLine:!1}),(0,b.jsx)(i.YAxis,{tickLine:!1,axisLine:!1,width:36}),(0,b.jsx)(y.ChartTooltip,{content:(0,b.jsx)(y.ChartTooltipContent,{nameKey:"source"})}),(0,b.jsx)(f.Bar,{dataKey:"sessions",fill:"var(--color-sessions)",radius:[6,6,0,0]})]})})})]})]}),(0,b.jsxs)(x.Tabs,{defaultValue:"resumen",className:"space-y-4",children:[(0,b.jsxs)(x.TabsList,{children:[(0,b.jsx)(x.TabsTrigger,{value:"resumen",children:"Resumen"}),(0,b.jsx)(x.TabsTrigger,{value:"paginas",children:"Páginas"}),(0,b.jsx)(x.TabsTrigger,{value:"eventos",children:"Eventos"})]}),(0,b.jsx)(x.TabsContent,{value:"resumen",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Estado de tracking"}),(0,b.jsx)(u.CardDescription,{children:"Verificación rápida de configuración"})]}),(0,b.jsxs)(u.CardContent,{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"GA4"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Measurement ID"})]}),(0,b.jsx)(s.Badge,{variant:"default",children:"Configurado"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Meta Pixel"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pixel ID"})]}),(0,b.jsx)(s.Badge,{variant:"default",children:"Configurado"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"GTM"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Container ID"})]}),(0,b.jsx)(s.Badge,{variant:"secondary",children:"Opcional"})]})]})]})}),(0,b.jsx)(x.TabsContent,{value:"paginas",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Top páginas"}),(0,b.jsx)(u.CardDescription,{children:"Páginas más vistas"})]}),(0,b.jsx)(u.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableHead,{children:"Ruta"}),(0,b.jsx)(w.TableHead,{className:"text-right",children:"Vistas"})]})}),(0,b.jsx)(w.TableBody,{children:D?(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:2,className:"text-center text-muted-foreground py-8",children:"Cargando..."})}):B?.topPages?.length?B.topPages.map(a=>(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"text-muted-foreground",children:a.path}),(0,b.jsx)(w.TableCell,{className:"text-right",children:A(a.views)})]},a.path)):(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:2,className:"text-center text-muted-foreground py-8",children:"Sin datos"})})})]})})]})}),(0,b.jsx)(x.TabsContent,{value:"eventos",children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Top eventos"}),(0,b.jsx)(u.CardDescription,{children:"Eventos GA4"})]}),(0,b.jsx)(u.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableHead,{children:"Evento"}),(0,b.jsx)(w.TableHead,{className:"text-right",children:"Ocurrencias"})]})}),(0,b.jsx)(w.TableBody,{children:D?(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:2,className:"text-center text-muted-foreground py-8",children:"Cargando..."})}):B?.topEvents?.length?B.topEvents.map(a=>(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:a.name})]})}),(0,b.jsx)(w.TableCell,{className:"text-right",children:A(a.count)})]},a.name)):(0,b.jsx)(w.TableRow,{children:(0,b.jsx)(w.TableCell,{colSpan:2,className:"text-center text-muted-foreground py-8",children:"Sin datos"})})})]})})]})})]})]})}a.s(["AnalyticsDashboard",()=>B],826170)}];

//# sourceMappingURL=components_admin_analytics-dashboard_tsx_95f427c8._.js.map