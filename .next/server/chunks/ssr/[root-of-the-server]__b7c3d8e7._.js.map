{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/circle-alert.ts","../../../../components/ui/alert.tsx","../../../../components/aliado/stats-dashboard.tsx/__nextjs-internal-proxy.mjs","../../../../app/aliado/stats/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('CircleAlert', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n]);\n\nexport default CircleAlert;\n","import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst alertVariants = cva(\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive:\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AliadoStatsDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call AliadoStatsDashboard() from the server but AliadoStatsDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/aliado/stats-dashboard.tsx\",\n    \"AliadoStatsDashboard\",\n);\n","import { createClient } from \"@/lib/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { AlertCircle } from \"lucide-react\"\nimport { AliadoStatsDashboard } from \"@/components/aliado/stats-dashboard\"\n\nexport default async function AliadoStatsPage() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    redirect(\"/auth/login\")\n  }\n\n  const { data: aliado } = await supabase\n    .from(\"aliados\")\n    .select(\"id, company_name\")\n    .eq(\"user_id\", user.id)\n    .single()\n\n  if (!aliado) {\n    return (\n      <div className=\"container mx-auto py-8 px-4\">\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            No tienes un perfil de aliado configurado. Contacta al administrador.\n          </AlertDescription>\n        </Alert>\n      </div>\n    )\n  }\n\n  const { data: distributors } = await supabase\n    .from(\"distributors\")\n    .select(\"id, company_name, is_active, last_purchase_date, total_purchases\")\n    .eq(\"aliado_id\", aliado.id)\n    .order(\"total_purchases\", { ascending: false })\n\n  let leads: any[] = []\n  try {\n    const { data } = await supabase\n      .from(\"leads\")\n      .select(\"id, stage, next_follow_up_date\")\n      .eq(\"aliado_id\", aliado.id)\n    leads = data || []\n  } catch (e) {\n    leads = []\n  }\n\n  const distributorsList = distributors || []\n  const totalDistributors = distributorsList.length\n  const activeDistributors = distributorsList.filter((d) => d.is_active).length\n  const totalSales = distributorsList.reduce((sum, d) => sum + (d.total_purchases || 0), 0)\n\n  const leadsByStage: Record<string, number> = {}\n  leads.forEach((lead) => {\n    const stage = lead.stage || \"sin_etapa\"\n    leadsByStage[stage] = (leadsByStage[stage] || 0) + 1\n  })\n\n  const pendingFollowUps = leads.filter((lead) => {\n    if (!lead.next_follow_up_date) return false\n    return new Date(lead.next_follow_up_date) <= new Date()\n  }).length\n\n  return (\n    <div className=\"container mx-auto py-8 px-4\">\n      <AliadoStatsDashboard\n        summary={{\n          companyName: aliado.company_name,\n          distributors: {\n            total: totalDistributors,\n            active: activeDistributors,\n            totalSales,\n            top: distributorsList.slice(0, 10),\n          },\n          leads: {\n            total: leads.length,\n            byStage: leadsByStage,\n            pendingFollowUps,\n          },\n        }}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,2]}