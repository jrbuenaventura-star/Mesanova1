{"version":3,"sources":["../../../../components/admin/csv-product-manager.tsx","../../../../components/admin/product-changelog.tsx","../../../../node_modules/lucide-react/src/icons/filter.ts","../../../../node_modules/lucide-react/src/icons/database.ts","../../../../node_modules/lucide-react/src/icons/history.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport {\n  Upload,\n  Download,\n  FileSpreadsheet,\n  AlertCircle,\n  CheckCircle,\n  XCircle,\n  ChevronDown,\n  ChevronUp,\n  RefreshCw,\n  FileText,\n  Info,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\ninterface ValidationError {\n  field: string;\n  message: string;\n  value: string;\n}\n\ninterface ValidationWarning {\n  field: string;\n  message: string;\n  value: string;\n}\n\ninterface ParsedProduct {\n  row: number;\n  data: Record<string, string>;\n  errors: ValidationError[];\n  warnings: ValidationWarning[];\n  isValid: boolean;\n}\n\ninterface ProductDiff {\n  ref: string;\n  changeType: 'create' | 'update' | 'unchanged';\n  changes: { field: string; oldValue: string | null; newValue: string | null }[];\n}\n\ninterface ValidationResult {\n  success: boolean;\n  stats: {\n    total: number;\n    valid: number;\n    invalid: number;\n    toCreate: number;\n    toUpdate: number;\n    unchanged: number;\n  };\n  globalErrors: string[];\n  products: ParsedProduct[];\n  diffs: ProductDiff[];\n  hasMore: boolean;\n}\n\ninterface ImportResult {\n  success: boolean;\n  importId: string;\n  created: number;\n  updated: number;\n  skipped: number;\n  errors: { row: number; ref: string; error: string }[];\n  hasMoreErrors: boolean;\n}\n\ntype ImportMode = 'update' | 'add_only' | 'replace_all';\ntype Step = 'upload' | 'preview' | 'importing' | 'complete';\n\nexport function CSVProductManager() {\n  const [step, setStep] = useState<Step>('upload');\n  const [file, setFile] = useState<File | null>(null);\n  const [validationResult, setValidationResult] = useState<ValidationResult | null>(null);\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n  const [importMode, setImportMode] = useState<ImportMode>('update');\n  const [isValidating, setIsValidating] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const parseApiResponse = async (response: Response) => {\n    const contentType = response.headers.get('content-type') || '';\n    if (contentType.includes('application/json')) {\n      return response.json();\n    }\n\n    const text = await response.text();\n    const isVercelProtected =\n      response.status === 401 && (text.includes('_vercel_sso_nonce') || text.toLowerCase().includes('vercel'));\n\n    const hint = isVercelProtected\n      ?\n        'Vercel está bloqueando la ruta (Deployment Protection/SSO). Desactiva la protección del deployment o permite acceso público a /api/* y redeploy.'\n      :\n        'La API devolvió una respuesta no-JSON.';\n\n    throw new Error(`${hint} (HTTP ${response.status})`);\n  };\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const csvFile = acceptedFiles[0];\n    if (!csvFile) return;\n\n    setFile(csvFile);\n    setError(null);\n    setIsValidating(true);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', csvFile);\n\n      const response = await fetch('/api/products/csv/validate', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await parseApiResponse(response);\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Error al validar archivo');\n      }\n\n      setValidationResult(result);\n      setStep('preview');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Error desconocido');\n    } finally {\n      setIsValidating(false);\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv'],\n      'application/vnd.ms-excel': ['.csv'],\n    },\n    maxFiles: 1,\n  });\n\n  const handleImport = async () => {\n    if (!file) return;\n\n    setIsImporting(true);\n    setStep('importing');\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('mode', importMode);\n\n      const response = await fetch('/api/products/csv/import', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await parseApiResponse(response);\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Error al importar archivo');\n      }\n\n      setImportResult(result);\n      setStep('complete');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Error desconocido');\n      setStep('preview');\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  const handleReset = () => {\n    setStep('upload');\n    setFile(null);\n    setValidationResult(null);\n    setImportResult(null);\n    setError(null);\n  };\n\n  const downloadTemplate = async (withDescriptions: boolean) => {\n    const url = withDescriptions\n      ? '/api/products/csv/template?descriptions=true'\n      : '/api/products/csv/template';\n    window.open(url, '_blank');\n  };\n\n  const downloadExport = async () => {\n    window.open('/api/products/csv/export', '_blank');\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header con opciones de descarga */}\n      <div className=\"flex flex-wrap gap-4 justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Gestión de Productos CSV</h2>\n          <p className=\"text-muted-foreground\">\n            Importa, exporta y sincroniza productos masivamente\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={() => downloadTemplate(false)}>\n            <Download className=\"w-4 h-4 mr-2\" />\n            Template vacío\n          </Button>\n          <Button variant=\"outline\" onClick={() => downloadTemplate(true)}>\n            <FileText className=\"w-4 h-4 mr-2\" />\n            Template con instrucciones\n          </Button>\n          <Button variant=\"secondary\" onClick={downloadExport}>\n            <FileSpreadsheet className=\"w-4 h-4 mr-2\" />\n            Exportar productos\n          </Button>\n        </div>\n      </div>\n\n      {/* Error global */}\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Error</AlertTitle>\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* Step: Upload */}\n      {step === 'upload' && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Subir archivo CSV</CardTitle>\n            <CardDescription>\n              Arrastra un archivo CSV o haz clic para seleccionarlo\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div\n              {...getRootProps()}\n              className={`\n                border-2 border-dashed rounded-lg p-12 text-center cursor-pointer\n                transition-colors\n                ${isDragActive ? 'border-primary bg-primary/5' : 'border-muted-foreground/25'}\n                ${isValidating ? 'opacity-50 pointer-events-none' : ''}\n              `}\n            >\n              <input {...getInputProps()} />\n              {isValidating ? (\n                <div className=\"flex flex-col items-center gap-4\">\n                  <RefreshCw className=\"w-12 h-12 animate-spin text-primary\" />\n                  <p className=\"text-lg\">Validando archivo...</p>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center gap-4\">\n                  <Upload className=\"w-12 h-12 text-muted-foreground\" />\n                  <div>\n                    <p className=\"text-lg font-medium\">\n                      {isDragActive\n                        ? 'Suelta el archivo aquí'\n                        : 'Arrastra un archivo CSV aquí'}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      o haz clic para seleccionar\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-6 p-4 bg-muted rounded-lg\">\n              <div className=\"flex items-start gap-2\">\n                <Info className=\"w-5 h-5 text-blue-500 mt-0.5\" />\n                <div className=\"text-sm\">\n                  <p className=\"font-medium mb-1\">Información importante:</p>\n                  <ul className=\"list-disc list-inside space-y-1 text-muted-foreground\">\n                    <li>El archivo debe estar en formato CSV con codificación UTF-8</li>\n                    <li>Los campos obligatorios son: Ref, Producto, Precio_COP</li>\n                    <li>Las imágenes deben ser URLs válidas</li>\n                    <li>Los productos existentes se identifican por la columna Ref</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step: Preview */}\n      {step === 'preview' && validationResult && (\n        <div className=\"space-y-6\">\n          {/* Estadísticas */}\n          <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold\">{validationResult.stats.total}</div>\n                <p className=\"text-sm text-muted-foreground\">Total filas</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {validationResult.stats.valid}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Válidas</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {validationResult.stats.invalid}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Con errores</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {validationResult.stats.toCreate}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Nuevos</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-amber-600\">\n                  {validationResult.stats.toUpdate}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">A actualizar</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-gray-600\">\n                  {validationResult.stats.unchanged}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Sin cambios</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Errores globales */}\n          {validationResult.globalErrors.length > 0 && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertTitle>Problemas con el archivo</AlertTitle>\n              <AlertDescription>\n                <ul className=\"list-disc list-inside mt-2\">\n                  {validationResult.globalErrors.map((err, i) => (\n                    <li key={i}>{err}</li>\n                  ))}\n                </ul>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Tabs de preview */}\n          <Tabs defaultValue=\"changes\">\n            <TabsList>\n              <TabsTrigger value=\"changes\">\n                Cambios ({validationResult.stats.toCreate + validationResult.stats.toUpdate})\n              </TabsTrigger>\n              <TabsTrigger value=\"errors\">\n                Errores ({validationResult.stats.invalid})\n              </TabsTrigger>\n              <TabsTrigger value=\"all\">Todos los productos</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"changes\" className=\"mt-4\">\n              <Card>\n                <CardContent className=\"pt-6\">\n                  <div className=\"max-h-96 overflow-auto\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Ref</TableHead>\n                          <TableHead>Acción</TableHead>\n                          <TableHead>Campos modificados</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {validationResult.diffs\n                          .filter((d) => d.changeType !== 'unchanged')\n                          .map((diff) => (\n                            <TableRow key={diff.ref}>\n                              <TableCell className=\"font-mono\">{diff.ref}</TableCell>\n                              <TableCell>\n                                <Badge\n                                  variant={\n                                    diff.changeType === 'create' ? 'default' : 'secondary'\n                                  }\n                                >\n                                  {diff.changeType === 'create' ? 'Nuevo' : 'Actualizar'}\n                                </Badge>\n                              </TableCell>\n                              <TableCell>\n                                {diff.changeType === 'create' ? (\n                                  <span className=\"text-muted-foreground\">\n                                    Producto nuevo\n                                  </span>\n                                ) : (\n                                  <div className=\"flex flex-wrap gap-1\">\n                                    {diff.changes.slice(0, 5).map((change) => (\n                                      <Badge key={change.field} variant=\"outline\">\n                                        {change.field}\n                                      </Badge>\n                                    ))}\n                                    {diff.changes.length > 5 && (\n                                      <Badge variant=\"outline\">\n                                        +{diff.changes.length - 5} más\n                                      </Badge>\n                                    )}\n                                  </div>\n                                )}\n                              </TableCell>\n                            </TableRow>\n                          ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"errors\" className=\"mt-4\">\n              <Card>\n                <CardContent className=\"pt-6\">\n                  {validationResult.stats.invalid === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <CheckCircle className=\"w-12 h-12 mx-auto mb-4 text-green-500\" />\n                      <p>No hay errores de validación</p>\n                    </div>\n                  ) : (\n                    <Accordion type=\"single\" collapsible className=\"w-full\">\n                      {validationResult.products\n                        .filter((p) => !p.isValid)\n                        .map((product) => (\n                          <AccordionItem key={product.row} value={`row-${product.row}`}>\n                            <AccordionTrigger>\n                              <div className=\"flex items-center gap-4\">\n                                <XCircle className=\"w-4 h-4 text-red-500\" />\n                                <span>Fila {product.row}</span>\n                                <span className=\"font-mono text-sm\">\n                                  {product.data.Ref || '(sin referencia)'}\n                                </span>\n                                <Badge variant=\"destructive\">\n                                  {product.errors.length} error(es)\n                                </Badge>\n                              </div>\n                            </AccordionTrigger>\n                            <AccordionContent>\n                              <ul className=\"space-y-2 pl-8\">\n                                {product.errors.map((err, i) => (\n                                  <li key={i} className=\"text-sm\">\n                                    <span className=\"font-medium\">{err.field}:</span>{' '}\n                                    {err.message}\n                                    {err.value && (\n                                      <span className=\"text-muted-foreground\">\n                                        {' '}\n                                        (valor: &quot;{err.value}&quot;)\n                                      </span>\n                                    )}\n                                  </li>\n                                ))}\n                              </ul>\n                            </AccordionContent>\n                          </AccordionItem>\n                        ))}\n                    </Accordion>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"all\" className=\"mt-4\">\n              <Card>\n                <CardContent className=\"pt-6\">\n                  <div className=\"max-h-96 overflow-auto\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Fila</TableHead>\n                          <TableHead>Ref</TableHead>\n                          <TableHead>Producto</TableHead>\n                          <TableHead>Precio</TableHead>\n                          <TableHead>Estado</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {validationResult.products.map((product) => (\n                          <TableRow key={product.row}>\n                            <TableCell>{product.row}</TableCell>\n                            <TableCell className=\"font-mono\">\n                              {product.data.Ref}\n                            </TableCell>\n                            <TableCell className=\"max-w-xs truncate\">\n                              {product.data.Producto}\n                            </TableCell>\n                            <TableCell>\n                              ${Number(product.data.Precio_COP || 0).toLocaleString()}\n                            </TableCell>\n                            <TableCell>\n                              {product.isValid ? (\n                                <Badge variant=\"outline\" className=\"text-green-600\">\n                                  <CheckCircle className=\"w-3 h-3 mr-1\" />\n                                  Válido\n                                </Badge>\n                              ) : (\n                                <Badge variant=\"destructive\">\n                                  <XCircle className=\"w-3 h-3 mr-1\" />\n                                  {product.errors.length} error(es)\n                                </Badge>\n                              )}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                  {validationResult.hasMore && (\n                    <p className=\"text-center text-sm text-muted-foreground mt-4\">\n                      Mostrando los primeros 100 productos...\n                    </p>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          {/* Opciones de importación */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Opciones de importación</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex flex-col md:flex-row gap-6 items-start md:items-end\">\n                <div className=\"flex-1\">\n                  <label className=\"text-sm font-medium mb-2 block\">\n                    Modo de importación\n                  </label>\n                  <Select\n                    value={importMode}\n                    onValueChange={(v) => setImportMode(v as ImportMode)}\n                  >\n                    <SelectTrigger className=\"w-full md:w-64\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"update\">\n                        Actualizar existentes y crear nuevos\n                      </SelectItem>\n                      <SelectItem value=\"add_only\">Solo agregar nuevos</SelectItem>\n                      <SelectItem value=\"replace_all\">\n                        Reemplazar toda la base (peligroso)\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {importMode === 'update' &&\n                      'Los productos existentes se actualizarán con los nuevos valores'}\n                    {importMode === 'add_only' &&\n                      'Solo se crearán productos nuevos, los existentes no se modificarán'}\n                    {importMode === 'replace_all' &&\n                      '⚠️ Todos los productos serán reemplazados'}\n                  </p>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" onClick={handleReset}>\n                    Cancelar\n                  </Button>\n                  <Button\n                    onClick={handleImport}\n                    disabled={validationResult.stats.invalid > 0}\n                  >\n                    {validationResult.stats.invalid > 0 ? (\n                      'Corrige los errores primero'\n                    ) : (\n                      <>\n                        <Upload className=\"w-4 h-4 mr-2\" />\n                        Importar {validationResult.stats.valid} productos\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Step: Importing */}\n      {step === 'importing' && (\n        <Card>\n          <CardContent className=\"py-12\">\n            <div className=\"flex flex-col items-center gap-6\">\n              <RefreshCw className=\"w-16 h-16 animate-spin text-primary\" />\n              <div className=\"text-center\">\n                <h3 className=\"text-xl font-bold mb-2\">Importando productos...</h3>\n                <p className=\"text-muted-foreground\">\n                  Por favor espera mientras se procesan los productos\n                </p>\n              </div>\n              <Progress value={33} className=\"w-64\" />\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step: Complete */}\n      {step === 'complete' && importResult && (\n        <div className=\"space-y-6\">\n          <Alert variant={importResult.success ? 'default' : 'destructive'}>\n            {importResult.success ? (\n              <CheckCircle className=\"h-4 w-4\" />\n            ) : (\n              <AlertCircle className=\"h-4 w-4\" />\n            )}\n            <AlertTitle>\n              {importResult.success\n                ? 'Importación completada'\n                : 'Importación completada con errores'}\n            </AlertTitle>\n            <AlertDescription>\n              Se procesaron {importResult.created + importResult.updated + importResult.skipped}{' '}\n              productos\n            </AlertDescription>\n          </Alert>\n\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {importResult.created}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Creados</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {importResult.updated}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Actualizados</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-gray-600\">\n                  {importResult.skipped}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Omitidos</p>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {importResult.errors.length}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">Errores</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {importResult.errors.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-red-600\">\n                  Errores durante la importación\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Fila</TableHead>\n                      <TableHead>Ref</TableHead>\n                      <TableHead>Error</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {importResult.errors.map((err, i) => (\n                      <TableRow key={i}>\n                        <TableCell>{err.row}</TableCell>\n                        <TableCell className=\"font-mono\">{err.ref}</TableCell>\n                        <TableCell>{err.error}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n                {importResult.hasMoreErrors && (\n                  <p className=\"text-center text-sm text-muted-foreground mt-4\">\n                    Mostrando los primeros 20 errores...\n                  </p>\n                )}\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"flex justify-center\">\n            <Button onClick={handleReset}>\n              <RefreshCw className=\"w-4 h-4 mr-2\" />\n              Nueva importación\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport {\n  History,\n  ChevronDown,\n  ChevronUp,\n  FileSpreadsheet,\n  Database,\n  User,\n  Filter,\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\n\ninterface ChangeLogEntry {\n  id: string;\n  product_id: string;\n  change_type: 'create' | 'update' | 'csv_import' | 'erp_sync';\n  change_source: 'csv' | 'erp' | 'admin' | 'api';\n  fields_changed: Record<string, { old: string | null; new: string | null }>;\n  changed_by: string;\n  csv_filename?: string;\n  csv_row_number?: number;\n  changed_at: string;\n  product?: {\n    pdt_codigo: string;\n    nombre_comercial: string;\n  };\n  user?: {\n    full_name: string;\n  };\n}\n\ninterface ProductChangelogProps {\n  productId?: string;\n}\n\nexport function ProductChangelog({ productId }: ProductChangelogProps) {\n  const [logs, setLogs] = useState<ChangeLogEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [changeTypeFilter, setChangeTypeFilter] = useState<string>('all');\n  const [sourceFilter, setSourceFilter] = useState<string>('all');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [hasMore, setHasMore] = useState(false);\n  const [offset, setOffset] = useState(0);\n\n  const fetchLogs = async (reset = false) => {\n    setLoading(true);\n    const newOffset = reset ? 0 : offset;\n    \n    try {\n      const params = new URLSearchParams();\n      if (productId) params.set('product_id', productId);\n      if (changeTypeFilter !== 'all') params.set('change_type', changeTypeFilter);\n      if (startDate) params.set('start_date', startDate);\n      if (endDate) params.set('end_date', endDate);\n      params.set('limit', '20');\n      params.set('offset', newOffset.toString());\n\n      const response = await fetch(`/api/products/csv/changelog?${params}`);\n      const data = await response.json();\n\n      if (reset) {\n        setLogs(data.logs || []);\n      } else {\n        setLogs((prev) => [...prev, ...(data.logs || [])]);\n      }\n      setHasMore(data.hasMore);\n      setOffset(newOffset + 20);\n    } catch (error) {\n      console.error('Error fetching changelog:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLogs(true);\n  }, [productId, changeTypeFilter, sourceFilter, startDate, endDate]);\n\n  const getChangeTypeLabel = (type: string) => {\n    const labels: Record<string, string> = {\n      create: 'Creación',\n      update: 'Actualización',\n      csv_import: 'Importación CSV',\n      erp_sync: 'Sincronización ERP',\n    };\n    return labels[type] || type;\n  };\n\n  const getChangeTypeBadgeVariant = (type: string) => {\n    const variants: Record<string, 'default' | 'secondary' | 'outline' | 'destructive'> = {\n      create: 'default',\n      update: 'secondary',\n      csv_import: 'outline',\n      erp_sync: 'outline',\n    };\n    return variants[type] || 'outline';\n  };\n\n  const getSourceIcon = (source: string) => {\n    switch (source) {\n      case 'csv':\n        return <FileSpreadsheet className=\"w-4 h-4\" />;\n      case 'erp':\n        return <Database className=\"w-4 h-4\" />;\n      case 'admin':\n        return <User className=\"w-4 h-4\" />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <History className=\"w-5 h-5\" />\n            Historial de Cambios\n          </CardTitle>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {/* Filtros */}\n        <div className=\"flex flex-wrap gap-4 mb-6\">\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"w-4 h-4 text-muted-foreground\" />\n            <span className=\"text-sm font-medium\">Filtros:</span>\n          </div>\n          <Select value={changeTypeFilter} onValueChange={setChangeTypeFilter}>\n            <SelectTrigger className=\"w-40\">\n              <SelectValue placeholder=\"Tipo de cambio\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Todos</SelectItem>\n              <SelectItem value=\"create\">Creación</SelectItem>\n              <SelectItem value=\"update\">Actualización</SelectItem>\n              <SelectItem value=\"csv_import\">CSV Import</SelectItem>\n              <SelectItem value=\"erp_sync\">ERP Sync</SelectItem>\n            </SelectContent>\n          </Select>\n          <Input\n            type=\"date\"\n            value={startDate}\n            onChange={(e) => setStartDate(e.target.value)}\n            className=\"w-40\"\n            placeholder=\"Desde\"\n          />\n          <Input\n            type=\"date\"\n            value={endDate}\n            onChange={(e) => setEndDate(e.target.value)}\n            className=\"w-40\"\n            placeholder=\"Hasta\"\n          />\n        </div>\n\n        {/* Lista de cambios */}\n        {loading && logs.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            Cargando historial...\n          </div>\n        ) : logs.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            No hay cambios registrados\n          </div>\n        ) : (\n          <Accordion type=\"single\" collapsible className=\"w-full\">\n            {logs.map((log) => (\n              <AccordionItem key={log.id} value={log.id}>\n                <AccordionTrigger>\n                  <div className=\"flex items-center gap-4 flex-1 text-left\">\n                    <span className=\"text-sm text-muted-foreground\">\n                      {format(new Date(log.changed_at), 'dd MMM yyyy HH:mm', {\n                        locale: es,\n                      })}\n                    </span>\n                    <Badge variant={getChangeTypeBadgeVariant(log.change_type)}>\n                      {getChangeTypeLabel(log.change_type)}\n                    </Badge>\n                    {!productId && log.product && (\n                      <span className=\"font-mono text-sm\">\n                        {log.product.pdt_codigo}\n                      </span>\n                    )}\n                    <span className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                      {getSourceIcon(log.change_source)}\n                      {log.change_source}\n                    </span>\n                  </div>\n                </AccordionTrigger>\n                <AccordionContent>\n                  <div className=\"pl-4 space-y-4\">\n                    {/* Info del cambio */}\n                    <div className=\"flex flex-wrap gap-4 text-sm\">\n                      {log.user && (\n                        <div>\n                          <span className=\"text-muted-foreground\">Usuario:</span>{' '}\n                          {log.user.full_name}\n                        </div>\n                      )}\n                      {log.csv_filename && (\n                        <div>\n                          <span className=\"text-muted-foreground\">Archivo:</span>{' '}\n                          {log.csv_filename}\n                        </div>\n                      )}\n                      {log.csv_row_number && (\n                        <div>\n                          <span className=\"text-muted-foreground\">Fila:</span>{' '}\n                          {log.csv_row_number}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Detalle de campos cambiados */}\n                    {log.change_type === 'create' ? (\n                      <p className=\"text-sm text-muted-foreground\">\n                        Producto creado\n                      </p>\n                    ) : (\n                      <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Campo</TableHead>\n                            <TableHead>Valor anterior</TableHead>\n                            <TableHead>Nuevo valor</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {Object.entries(log.fields_changed).map(\n                            ([field, values]) => (\n                              <TableRow key={field}>\n                                <TableCell className=\"font-medium\">\n                                  {field}\n                                </TableCell>\n                                <TableCell className=\"text-red-600 max-w-xs truncate\">\n                                  {values.old || '(vacío)'}\n                                </TableCell>\n                                <TableCell className=\"text-green-600 max-w-xs truncate\">\n                                  {values.new || '(vacío)'}\n                                </TableCell>\n                              </TableRow>\n                            )\n                          )}\n                        </TableBody>\n                      </Table>\n                    )}\n                  </div>\n                </AccordionContent>\n              </AccordionItem>\n            ))}\n          </Accordion>\n        )}\n\n        {/* Cargar más */}\n        {hasMore && (\n          <div className=\"text-center mt-4\">\n            <Button\n              variant=\"outline\"\n              onClick={() => fetchLogs(false)}\n              disabled={loading}\n            >\n              {loading ? 'Cargando...' : 'Cargar más'}\n            </Button>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Filter\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjIyIDMgMiAzIDEwIDEyLjQ2IDEwIDE5IDE0IDIxIDE0IDEyLjQ2IDIyIDMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/filter\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Filter = createLucideIcon('Filter', [\n  ['polygon', { points: '22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3', key: '1yg77f' }],\n]);\n\nexport default Filter;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Database\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8ZWxsaXBzZSBjeD0iMTIiIGN5PSI1IiByeD0iOSIgcnk9IjMiIC8+CiAgPHBhdGggZD0iTTMgNVYxOUE5IDMgMCAwIDAgMjEgMTlWNSIgLz4KICA8cGF0aCBkPSJNMyAxMkE5IDMgMCAwIDAgMjEgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/database\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Database = createLucideIcon('Database', [\n  ['ellipse', { cx: '12', cy: '5', rx: '9', ry: '3', key: 'msslwz' }],\n  ['path', { d: 'M3 5V19A9 3 0 0 0 21 19V5', key: '1wlel7' }],\n  ['path', { d: 'M3 12A9 3 0 0 0 21 12', key: 'mv7ke4' }],\n]);\n\nexport default Database;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name History\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgogIDxwYXRoIGQ9Ik0xMiA3djVsNCAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/history\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst History = createLucideIcon('History', [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n  ['path', { d: 'M12 7v5l4 2', key: '1fdv2h' }],\n]);\n\nexport default History;\n"],"names":[],"mappings":"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","ignoreList":[2,3,4]}