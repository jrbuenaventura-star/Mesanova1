module.exports=[92771,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(256711),e=a.i(42724),f=a.i(774016),g=a.i(202253),h=a.i(933575),i=a.i(587532),j=a.i(284505),k=a.i(660246),l=a.i(170106);let m=(0,l.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var n=a.i(724669),o=a.i(669520),p=a.i(405784),q=a.i(598091),q=q,r=a.i(992258),s=a.i(963519),t=a.i(124987),u=a.i(463910),v=a.i(790166),w=a.i(177156),x=a.i(824569);let y=(0,l.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var z=a.i(633508),A=a.i(172162),B=a.i(703130),C=a.i(254161),D=a.i(340695),E=a.i(205522),F=a.i(917171),G=a.i(46143),H=a.i(887682),I=a.i(588237),J=a.i(353071),K=a.i(676504),L=a.i(965733),M=a.i(621958),N=a.i(644010);let O=[{value:"vip",label:"VIP",color:"bg-purple-100 text-purple-800"},{value:"leal",label:"Leal",color:"bg-green-100 text-green-800"},{value:"regular",label:"Regular",color:"bg-blue-100 text-blue-800"},{value:"ocasional",label:"Ocasional",color:"bg-gray-100 text-gray-800"},{value:"en_riesgo",label:"En riesgo",color:"bg-amber-100 text-amber-800"},{value:"dormido",label:"Dormido",color:"bg-red-100 text-red-800"},{value:"nuevo",label:"Nuevo",color:"bg-indigo-100 text-indigo-800"}],P=[{value:"b2b",label:"B2B"},{value:"b2c",label:"B2C"},{value:"distributor",label:"Distribuidor"}],Q={search:"",customerType:[],segment:[],city:"",state:"",minSpent:0,maxSpent:1e9,minFrequency:0,maxFrequency:100,recencyDays:365,hasAgent:"all",isActive:"all",sortBy:"lastPurchaseAt",sortOrder:"desc"};function R(){let[a,l]=(0,c.useState)([]),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(Q),[V,W]=(0,c.useState)(!0),[X,Y]=(0,c.useState)(new Set),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(!1);(0,c.useEffect)(()=>{ad()},[]);let ad=async()=>{W(!0);try{S({totalCustomers:1245,activeCustomers:892,newCustomersThisMonth:47,totalRevenue:285e7,averageCustomerValue:2289558,segmentCounts:{vip:45,leal:156,regular:289,ocasional:234,en_riesgo:98,dormido:376,nuevo:47}}),l([{id:"1",type:"distributor",name:"Distribuidora El Éxito",email:"ventas@elexito.com",phone:"+57 311 234 5678",documentNumber:"J-12345678-9",city:"Bogotá",state:"Cundinamarca",segment:"vip",firstPurchaseAt:"2023-03-15",lastPurchaseAt:"2026-01-15",totalPurchases:156,totalSpent:45e7,purchaseFrequency:5.2,averageOrderValue:2884615,assignedAgent:"Carlos Rodríguez",creditLimit:1e8,currentBalance:25e6,discountPercentage:20,isActive:!0,createdAt:"2023-03-10"},{id:"2",type:"distributor",name:"Comercial La Gran Tienda",email:"compras@lagrantienda.com",phone:"+57 312 345 6789",documentNumber:"J-23456789-0",city:"Medellín",state:"Antioquia",segment:"leal",firstPurchaseAt:"2023-06-20",lastPurchaseAt:"2026-01-12",totalPurchases:98,totalSpent:28e7,purchaseFrequency:3.8,averageOrderValue:2857143,assignedAgent:"María González",creditLimit:75e6,currentBalance:18e6,discountPercentage:15,isActive:!0,createdAt:"2023-06-15"},{id:"3",type:"b2b",name:"Restaurante El Sabor",email:"gerencia@elsabor.com",phone:"+57 313 456 7890",documentNumber:"J-34567890-1",city:"Cali",state:"Valle del Cauca",segment:"regular",firstPurchaseAt:"2024-01-10",lastPurchaseAt:"2026-01-08",totalPurchases:24,totalSpent:45e6,purchaseFrequency:2,averageOrderValue:1875e3,assignedAgent:null,creditLimit:2e7,currentBalance:5e6,discountPercentage:10,isActive:!0,createdAt:"2024-01-05"},{id:"4",type:"b2c",name:"Ana María López",email:"ana.lopez@email.com",phone:"+57 314 567 8901",documentNumber:"52.345.678",city:"Bogotá",state:"Cundinamarca",segment:"ocasional",firstPurchaseAt:"2024-06-15",lastPurchaseAt:"2025-11-20",totalPurchases:3,totalSpent:85e4,purchaseFrequency:.5,averageOrderValue:283333,assignedAgent:null,creditLimit:0,currentBalance:0,discountPercentage:5,isActive:!0,createdAt:"2024-06-10"},{id:"5",type:"b2b",name:"Hotel Paraíso",email:"compras@hotelparaiso.com",phone:"+57 315 678 9012",documentNumber:"J-45678901-2",city:"Cartagena",state:"Bolívar",segment:"en_riesgo",firstPurchaseAt:"2023-09-01",lastPurchaseAt:"2025-10-15",totalPurchases:18,totalSpent:65e6,purchaseFrequency:1.5,averageOrderValue:3611111,assignedAgent:"Carlos Rodríguez",creditLimit:3e7,currentBalance:12e6,discountPercentage:12,isActive:!0,createdAt:"2023-08-25"},{id:"6",type:"distributor",name:"Tiendas del Norte",email:"info@tiendasnorte.com",phone:"+57 316 789 0123",documentNumber:"J-56789012-3",city:"Barranquilla",state:"Atlántico",segment:"dormido",firstPurchaseAt:"2023-04-10",lastPurchaseAt:"2025-06-20",totalPurchases:35,totalSpent:125e6,purchaseFrequency:1.2,averageOrderValue:3571429,assignedAgent:"María González",creditLimit:5e7,currentBalance:0,discountPercentage:15,isActive:!0,createdAt:"2023-04-05"},{id:"7",type:"b2c",name:"Pedro García",email:"pedro.garcia@email.com",phone:"+57 317 890 1234",documentNumber:"80.123.456",city:"Bucaramanga",state:"Santander",segment:"nuevo",firstPurchaseAt:"2026-01-10",lastPurchaseAt:"2026-01-10",totalPurchases:1,totalSpent:45e4,purchaseFrequency:0,averageOrderValue:45e4,assignedAgent:null,creditLimit:0,currentBalance:0,discountPercentage:0,isActive:!0,createdAt:"2026-01-08"}])}catch(a){console.error("Error fetching CRM data:",a)}finally{W(!1)}},ae=(0,c.useMemo)(()=>{let b=[...a];if(T.search){let a=T.search.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.email.toLowerCase().includes(a)||b.documentNumber.toLowerCase().includes(a)||b.city.toLowerCase().includes(a))}if(T.customerType.length>0&&(b=b.filter(a=>T.customerType.includes(a.type))),T.segment.length>0&&(b=b.filter(a=>T.segment.includes(a.segment))),T.city&&(b=b.filter(a=>a.city.toLowerCase().includes(T.city.toLowerCase()))),T.state&&(b=b.filter(a=>a.state.toLowerCase().includes(T.state.toLowerCase()))),b=(b=b.filter(a=>a.totalSpent>=T.minSpent&&a.totalSpent<=T.maxSpent)).filter(a=>a.purchaseFrequency>=T.minFrequency&&a.purchaseFrequency<=T.maxFrequency),T.recencyDays<365){var c,d,g,h;let a,i=(c=new Date,d=T.recencyDays,g=-d,h=void 0,a=(0,f.toDate)(c,h?.in),isNaN(g)?(0,e.constructFrom)(h?.in||c,NaN):(g&&a.setDate(a.getDate()+g),a));b=b.filter(a=>!!a.lastPurchaseAt&&new Date(a.lastPurchaseAt)>=i)}return"yes"===T.hasAgent?b=b.filter(a=>null!==a.assignedAgent):"no"===T.hasAgent&&(b=b.filter(a=>null===a.assignedAgent)),"yes"===T.isActive?b=b.filter(a=>a.isActive):"no"===T.isActive&&(b=b.filter(a=>!a.isActive)),b.sort((a,b)=>{let c=a[T.sortBy],d=b[T.sortBy];return(T.sortBy.includes("At")&&c&&d&&(c=new Date(c).getTime(),d=new Date(d).getTime()),null==c)?1:null==d?-1:"asc"===T.sortOrder?c>d?1:-1:c<d?1:-1}),b},[a,T]),af=a=>{let c=O.find(b=>b.value===a);return c?(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.color}`,children:c.label}):(0,b.jsx)(C.Badge,{variant:"outline",children:a})},ag=a=>(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${{b2b:"bg-blue-100 text-blue-800",b2c:"bg-green-100 text-green-800",distributor:"bg-purple-100 text-purple-800"}[a]}`,children:{b2b:"B2B",b2c:"B2C",distributor:"Distribuidor"}[a]}),ah=(0,c.useMemo)(()=>{let a=0;return T.search&&a++,T.customerType.length>0&&a++,T.segment.length>0&&a++,T.city&&a++,T.state&&a++,T.minSpent>0&&a++,T.maxSpent<1e9&&a++,T.minFrequency>0&&a++,T.maxFrequency<100&&a++,T.recencyDays<365&&a++,"all"!==T.hasAgent&&a++,"all"!==T.isActive&&a++,a},[T]);return V?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(o.RefreshCw,{className:"w-8 h-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"CRM - Gestión de Clientes"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[ae.length," clientes encontrados",ah>0&&` (${ah} filtros activos)`]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(D.Button,{variant:"outline",onClick:()=>{let a=new Blob([[["Nombre","Tipo","Email","Teléfono","Ciudad","Departamento","Segmento","Total Compras","Total Gastado","Frecuencia","Última Compra","Corredor"],...ae.map(a=>[a.name,a.type,a.email,a.phone,a.city,a.state,a.segment,a.totalPurchases,a.totalSpent,a.purchaseFrequency,a.lastPurchaseAt||"",a.assignedAgent||""])].map(a=>a.join(",")).join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`clientes_${(0,d.format)(new Date,"yyyy-MM-dd")}.csv`,c.click()},children:[(0,b.jsx)(j.Download,{className:"w-4 h-4 mr-2"}),"Exportar"]}),(0,b.jsxs)(D.Button,{variant:"outline",onClick:ad,children:[(0,b.jsx)(o.RefreshCw,{className:"w-4 h-4 mr-2"}),"Actualizar"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:R?.totalCustomers.toLocaleString()}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total clientes"})]}),(0,b.jsx)(k.Users,{className:"w-8 h-8 text-muted-foreground"})]})})}),(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:R?.activeCustomers.toLocaleString()}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Activos"})]}),(0,b.jsx)(m,{className:"w-8 h-8 text-green-500"})]})})}),(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["+",R?.newCustomersThisMonth]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nuevos (mes)"})]}),(0,b.jsx)(n.TrendingUp,{className:"w-8 h-8 text-blue-500"})]})})}),(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",((R?.totalRevenue||0)/1e9).toFixed(1),"B"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ingresos totales"})]}),(0,b.jsx)(v.DollarSign,{className:"w-8 h-8 text-muted-foreground"})]})})}),(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",((R?.averageCustomerValue||0)/1e6).toFixed(1),"M"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Valor promedio"})]}),(0,b.jsx)(n.TrendingUp,{className:"w-8 h-8 text-muted-foreground"})]})})})]}),(0,b.jsxs)(B.Card,{children:[(0,b.jsx)(B.CardHeader,{className:"pb-3",children:(0,b.jsx)(B.CardTitle,{className:"text-sm font-medium",children:"Distribución por Segmento"})}),(0,b.jsx)(B.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-3",children:O.map(a=>(0,b.jsxs)("button",{onClick:()=>{let b=T.segment.includes(a.value)?T.segment.filter(b=>b!==a.value):[...T.segment,a.value];U({...T,segment:b})},className:`px-3 py-2 rounded-lg border transition-colors ${T.segment.includes(a.value)?"border-primary bg-primary/10":"border-transparent hover:border-muted"}`,children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${a.color}`,children:a.label}),(0,b.jsx)("span",{className:"ml-2 text-lg font-bold",children:R?.segmentCounts[a.value]||0})]},a.value))})})]}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(E.Input,{placeholder:"Buscar por nombre, email, documento o ciudad...",value:T.search,onChange:a=>U({...T,search:a.target.value}),className:"pl-10"})]}),(0,b.jsxs)(J.Sheet,{open:Z,onOpenChange:$,children:[(0,b.jsx)(J.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(D.Button,{variant:"outline",children:[(0,b.jsx)(A.SlidersHorizontal,{className:"w-4 h-4 mr-2"}),"Filtros",ah>0&&(0,b.jsx)(C.Badge,{variant:"secondary",className:"ml-2",children:ah})]})}),(0,b.jsxs)(J.SheetContent,{className:"w-[400px] overflow-y-auto",children:[(0,b.jsxs)(J.SheetHeader,{children:[(0,b.jsx)(J.SheetTitle,{children:"Filtros avanzados"}),(0,b.jsx)(J.SheetDescription,{children:"Filtra clientes por múltiples criterios"})]}),(0,b.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{className:"mb-2 block",children:"Tipo de cliente"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:P.map(a=>(0,b.jsx)(D.Button,{variant:T.customerType.includes(a.value)?"default":"outline",size:"sm",onClick:()=>{let b=T.customerType.includes(a.value)?T.customerType.filter(b=>b!==a.value):[...T.customerType,a.value];U({...T,customerType:b})},children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{htmlFor:"city",children:"Ciudad"}),(0,b.jsx)(E.Input,{id:"city",value:T.city,onChange:a=>U({...T,city:a.target.value}),placeholder:"Ej: Bogotá"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{htmlFor:"state",children:"Departamento"}),(0,b.jsx)(E.Input,{id:"state",value:T.state,onChange:a=>U({...T,state:a.target.value}),placeholder:"Ej: Cundinamarca"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{children:"Última compra (días)"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,b.jsx)(N.Slider,{value:[T.recencyDays],onValueChange:([a])=>U({...T,recencyDays:a}),max:365,step:30,className:"flex-1"}),(0,b.jsx)("span",{className:"w-20 text-sm",children:T.recencyDays>=365?"Todos":`≤${T.recencyDays}d`})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{children:"Frecuencia de compra (compras/año)"}),(0,b.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,b.jsx)(E.Input,{type:"number",value:T.minFrequency,onChange:a=>U({...T,minFrequency:Number(a.target.value)}),placeholder:"Mín",className:"w-24"}),(0,b.jsx)("span",{className:"self-center",children:"-"}),(0,b.jsx)(E.Input,{type:"number",value:T.maxFrequency,onChange:a=>U({...T,maxFrequency:Number(a.target.value)}),placeholder:"Máx",className:"w-24"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{children:"Corredor asignado"}),(0,b.jsxs)(H.Select,{value:T.hasAgent,onValueChange:a=>U({...T,hasAgent:a}),children:[(0,b.jsx)(H.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"all",children:"Todos"}),(0,b.jsx)(H.SelectItem,{value:"yes",children:"Con corredor"}),(0,b.jsx)(H.SelectItem,{value:"no",children:"Sin corredor"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{children:"Estado"}),(0,b.jsxs)(H.Select,{value:T.isActive,onValueChange:a=>U({...T,isActive:a}),children:[(0,b.jsx)(H.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(H.SelectValue,{})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"all",children:"Todos"}),(0,b.jsx)(H.SelectItem,{value:"yes",children:"Activos"}),(0,b.jsx)(H.SelectItem,{value:"no",children:"Inactivos"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(D.Button,{variant:"outline",onClick:()=>{U(Q)},className:"flex-1",children:"Limpiar filtros"}),(0,b.jsx)(D.Button,{onClick:()=>$(!1),className:"flex-1",children:"Aplicar"})]})]})]})]}),(0,b.jsxs)(H.Select,{value:T.sortBy,onValueChange:a=>U({...T,sortBy:a}),children:[(0,b.jsx)(H.SelectTrigger,{className:"w-48",children:(0,b.jsx)(H.SelectValue,{placeholder:"Ordenar por"})}),(0,b.jsxs)(H.SelectContent,{children:[(0,b.jsx)(H.SelectItem,{value:"lastPurchaseAt",children:"Última compra"}),(0,b.jsx)(H.SelectItem,{value:"totalSpent",children:"Total gastado"}),(0,b.jsx)(H.SelectItem,{value:"purchaseFrequency",children:"Frecuencia"}),(0,b.jsx)(H.SelectItem,{value:"name",children:"Nombre"}),(0,b.jsx)(H.SelectItem,{value:"createdAt",children:"Fecha registro"})]})]}),(0,b.jsx)(D.Button,{variant:"ghost",size:"icon",onClick:()=>U({...T,sortOrder:"asc"===T.sortOrder?"desc":"asc"}),children:"asc"===T.sortOrder?(0,b.jsx)(q.default,{className:"w-4 h-4"}):(0,b.jsx)(p.ChevronDown,{className:"w-4 h-4"})})]}),X.size>0&&(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[(0,b.jsxs)("span",{className:"font-medium",children:[X.size," seleccionados"]}),(0,b.jsxs)(D.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(r.Mail,{className:"w-4 h-4 mr-2"}),"Enviar email"]}),(0,b.jsxs)(D.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(k.Users,{className:"w-4 h-4 mr-2"}),"Asignar corredor"]}),(0,b.jsxs)(D.Button,{variant:"ghost",size:"sm",onClick:()=>Y(new Set),children:[(0,b.jsx)(z.X,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]}),(0,b.jsx)(B.Card,{children:(0,b.jsx)(B.CardContent,{className:"p-0",children:(0,b.jsxs)(I.Table,{children:[(0,b.jsx)(I.TableHeader,{children:(0,b.jsxs)(I.TableRow,{children:[(0,b.jsx)(I.TableHead,{className:"w-12",children:(0,b.jsx)(G.Checkbox,{checked:X.size===ae.length&&ae.length>0,onCheckedChange:()=>{X.size===ae.length?Y(new Set):Y(new Set(ae.map(a=>a.id)))}})}),(0,b.jsx)(I.TableHead,{children:"Cliente"}),(0,b.jsx)(I.TableHead,{children:"Tipo"}),(0,b.jsx)(I.TableHead,{children:"Ubicación"}),(0,b.jsx)(I.TableHead,{children:"Segmento"}),(0,b.jsx)(I.TableHead,{children:"Compras"}),(0,b.jsx)(I.TableHead,{children:"Total"}),(0,b.jsx)(I.TableHead,{children:"Última compra"}),(0,b.jsx)(I.TableHead,{children:"Corredor"}),(0,b.jsx)(I.TableHead,{className:"w-12"})]})}),(0,b.jsx)(I.TableBody,{children:ae.map(a=>(0,b.jsxs)(I.TableRow,{children:[(0,b.jsx)(I.TableCell,{children:(0,b.jsx)(G.Checkbox,{checked:X.has(a.id),onCheckedChange:()=>{var b;let c;return b=a.id,void((c=new Set(X)).has(b)?c.delete(b):c.add(b),Y(c))}})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.email})]})}),(0,b.jsx)(I.TableCell,{children:ag(a.type)}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{children:a.city}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.state})]})}),(0,b.jsx)(I.TableCell,{children:af(a.segment)}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{children:a.totalPurchases}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.purchaseFrequency.toFixed(1),"/año"]})]})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"font-medium",children:["$",(a.totalSpent/1e6).toFixed(1),"M"]})}),(0,b.jsx)(I.TableCell,{children:a.lastPurchaseAt?(0,b.jsx)("span",{className:(a=>{if(!a)return"text-gray-400";let b=(0,g.differenceInDays)(new Date,new Date(a));return b<=30?"text-green-600":b<=60?"text-amber-600":"text-red-600"})(a.lastPurchaseAt),children:(0,d.format)(new Date(a.lastPurchaseAt),"dd/MM/yy")}):(0,b.jsx)("span",{className:"text-gray-400",children:"Nunca"})}),(0,b.jsx)(I.TableCell,{children:a.assignedAgent||(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)(K.DropdownMenu,{children:[(0,b.jsx)(K.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(D.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(y,{className:"w-4 h-4"})})}),(0,b.jsxs)(K.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(K.DropdownMenuLabel,{children:"Acciones"}),(0,b.jsx)(K.DropdownMenuSeparator,{}),(0,b.jsxs)(K.DropdownMenuItem,{onClick:()=>{aa(a),ac(!0)},children:[(0,b.jsx)(w.Eye,{className:"w-4 h-4 mr-2"}),"Ver detalle"]}),(0,b.jsxs)(K.DropdownMenuItem,{children:[(0,b.jsx)(x.Edit,{className:"w-4 h-4 mr-2"}),"Editar"]}),(0,b.jsxs)(K.DropdownMenuItem,{children:[(0,b.jsx)(r.Mail,{className:"w-4 h-4 mr-2"}),"Enviar email"]}),(0,b.jsxs)(K.DropdownMenuItem,{children:[(0,b.jsx)(k.Users,{className:"w-4 h-4 mr-2"}),"Asignar corredor"]})]})]})})]},a.id))})]})})}),(0,b.jsx)(L.Dialog,{open:ab,onOpenChange:ac,children:(0,b.jsx)(L.DialogContent,{className:"max-w-2xl",children:_&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)(L.DialogTitle,{className:"flex items-center gap-3",children:[_.name,ag(_.type),af(_.segment)]}),(0,b.jsxs)(L.DialogDescription,{children:["Cliente desde ",(0,d.format)(new Date(_.createdAt),"MMMM 'de' yyyy",{locale:h.es})]})]}),(0,b.jsxs)(M.Tabs,{defaultValue:"info",className:"mt-4",children:[(0,b.jsxs)(M.TabsList,{children:[(0,b.jsx)(M.TabsTrigger,{value:"info",children:"Información"}),(0,b.jsx)(M.TabsTrigger,{value:"metrics",children:"Métricas"}),(0,b.jsx)(M.TabsTrigger,{value:"commercial",children:"Comercial"})]}),(0,b.jsx)(M.TabsContent,{value:"info",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Mail,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{children:_.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Phone,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{children:_.phone})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Building,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{children:_.documentNumber})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.MapPin,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("span",{children:[_.city,", ",_.state]})]})]})}),(0,b.jsx)(M.TabsContent,{value:"metrics",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(B.Card,{children:(0,b.jsxs)(B.CardContent,{className:"pt-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:_.totalPurchases}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total compras"})]})}),(0,b.jsx)(B.Card,{children:(0,b.jsxs)(B.CardContent,{className:"pt-4",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",(_.totalSpent/1e6).toFixed(1),"M"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total gastado"})]})}),(0,b.jsx)(B.Card,{children:(0,b.jsxs)(B.CardContent,{className:"pt-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:_.purchaseFrequency.toFixed(1)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Compras/año"})]})}),(0,b.jsx)(B.Card,{children:(0,b.jsxs)(B.CardContent,{className:"pt-4",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",(_.averageOrderValue/1e6).toFixed(2),"M"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ticket promedio"})]})})]})}),(0,b.jsx)(M.TabsContent,{value:"commercial",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{className:"text-muted-foreground",children:"Descuento asignado"}),(0,b.jsxs)("p",{className:"text-lg font-medium",children:[_.discountPercentage,"%"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{className:"text-muted-foreground",children:"Corredor asignado"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:_.assignedAgent||"Sin asignar"})]}),"b2c"!==_.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{className:"text-muted-foreground",children:"Límite de crédito"}),(0,b.jsxs)("p",{className:"text-lg font-medium",children:["$",_.creditLimit.toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.Label,{className:"text-muted-foreground",children:"Saldo actual"}),(0,b.jsxs)("p",{className:"text-lg font-medium",children:["$",_.currentBalance.toLocaleString()]})]})]})]})})]})]})})})]})}a.s(["CRMDashboard",()=>R],92771)}];

//# sourceMappingURL=components_admin_crm-dashboard_tsx_c6c0facd._.js.map