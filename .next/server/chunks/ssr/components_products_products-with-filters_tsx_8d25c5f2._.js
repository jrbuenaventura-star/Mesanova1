module.exports=[73806,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(17171),f=a.i(46143),g=a.i(30656),h=a.i(7554),i=a.i(70121),j=a.i(50104),k=a.i(25152),l=a.i(7827),m=a.i(77994),n=a.i(3688),o=a.i(30553),p=a.i(37738),q=["PageUp","PageDown"],r=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],s={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},t="Slider",[u,v,w]=(0,p.createCollection)(t),[x,y]=(0,j.createContextScope)(t,[w]),[z,A]=x(t),B=c.forwardRef((a,d)=>{let{name:e,min:f=0,max:i=100,step:j=1,orientation:l="horizontal",disabled:m=!1,minStepsBetweenThumbs:n=0,defaultValue:o=[f],value:p,onValueChange:s=()=>{},onValueCommit:t=()=>{},inverted:v=!1,form:w,...x}=a,y=c.useRef(new Set),A=c.useRef(0),B="horizontal"===l,[C=[],D]=(0,k.useControllableState)({prop:p,defaultProp:o,onChange:a=>{let b=[...y.current];b[A.current]?.focus(),s(a)}}),G=c.useRef(C);function H(a,b,{commit:c}={commit:!1}){let d,e=(String(j).split(".")[1]||"").length,h=Math.round((Math.round((a-f)/j)*j+f)*(d=Math.pow(10,e)))/d,k=(0,g.clamp)(h,[f,i]);D((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,k,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,n*j))return a;{A.current=d.indexOf(k);let b=String(d)!==String(a);return b&&c&&t(d),b?d:a}})}return(0,b.jsx)(z,{scope:a.__scopeSlider,name:e,disabled:m,min:f,max:i,valueIndexToChangeRef:A,thumbs:y.current,values:C,orientation:l,form:w,children:(0,b.jsx)(u.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(u.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(B?E:F,{"aria-disabled":m,"data-disabled":m?"":void 0,...x,ref:d,onPointerDown:(0,h.composeEventHandlers)(x.onPointerDown,()=>{m||(G.current=C)}),min:f,max:i,inverted:v,onSlideStart:m?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(C,a);H(a,b)},onSlideMove:m?void 0:function(a){H(a,A.current)},onSlideEnd:m?void 0:function(){let a=G.current[A.current];C[A.current]!==a&&t(C)},onHomeKeyDown:()=>!m&&H(f,0,{commit:!0}),onEndKeyDown:()=>!m&&H(i,C.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!m){let c=q.includes(a.key)||a.shiftKey&&r.includes(a.key),d=A.current;H(C[d]+j*(c?10:1)*b,d,{commit:!0})}}})})})})});B.displayName=t;var[C,D]=x(t,{startEdge:"left",endEdge:"right",size:"width",direction:1}),E=c.forwardRef((a,d)=>{let{min:e,max:f,dir:g,inverted:h,onSlideStart:j,onSlideMove:k,onSlideEnd:m,onStepKeyDown:n,...o}=a,[p,q]=c.useState(null),r=(0,i.useComposedRefs)(d,a=>q(a)),t=c.useRef(void 0),u=(0,l.useDirection)(g),v="ltr"===u,w=v&&!h||!v&&h;function x(a){let b=t.current||p.getBoundingClientRect(),c=Q([0,b.width],w?[e,f]:[f,e]);return t.current=b,c(a-b.left)}return(0,b.jsx)(C,{scope:a.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:(0,b.jsx)(G,{dir:u,"data-orientation":"horizontal",...o,ref:r,style:{...o.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=x(a.clientX);j?.(b)},onSlideMove:a=>{let b=x(a.clientX);k?.(b)},onSlideEnd:()=>{t.current=void 0,m?.()},onStepKeyDown:a=>{let b=s[w?"from-left":"from-right"].includes(a.key);n?.({event:a,direction:b?-1:1})}})})}),F=c.forwardRef((a,d)=>{let{min:e,max:f,inverted:g,onSlideStart:h,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,n=c.useRef(null),o=(0,i.useComposedRefs)(d,n),p=c.useRef(void 0),q=!g;function r(a){let b=p.current||n.current.getBoundingClientRect(),c=Q([0,b.height],q?[f,e]:[e,f]);return p.current=b,c(a-b.top)}return(0,b.jsx)(C,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,b.jsx)(G,{"data-orientation":"vertical",...m,ref:o,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);h?.(b)},onSlideMove:a=>{let b=r(a.clientY);j?.(b)},onSlideEnd:()=>{p.current=void 0,k?.()},onStepKeyDown:a=>{let b=s[q?"from-bottom":"from-top"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),G=c.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:i,onEndKeyDown:j,onStepKeyDown:k,...l}=a,m=A(t,d);return(0,b.jsx)(o.Primitive.span,{...l,ref:c,onKeyDown:(0,h.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(i(a),a.preventDefault()):"End"===a.key?(j(a),a.preventDefault()):q.concat(r).includes(a.key)&&(k(a),a.preventDefault())}),onPointerDown:(0,h.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),m.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,h.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,h.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),H="SliderTrack",I=c.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=A(H,d);return(0,b.jsx)(o.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});I.displayName=H;var J="SliderRange",K=c.forwardRef((a,d)=>{let{__scopeSlider:e,...f}=a,g=A(J,e),h=D(J,e),j=c.useRef(null),k=(0,i.useComposedRefs)(d,j),l=g.values.length,m=g.values.map(a=>P(a,g.min,g.max)),n=l>1?Math.min(...m):0,p=100-Math.max(...m);return(0,b.jsx)(o.Primitive.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...f,ref:k,style:{...a.style,[h.startEdge]:n+"%",[h.endEdge]:p+"%"}})});K.displayName=J;var L="SliderThumb",M=c.forwardRef((a,d)=>{let e=v(a.__scopeSlider),[f,g]=c.useState(null),h=(0,i.useComposedRefs)(d,a=>g(a)),j=c.useMemo(()=>f?e().findIndex(a=>a.ref.current===f):-1,[e,f]);return(0,b.jsx)(N,{...a,ref:h,index:j})}),N=c.forwardRef((a,d)=>{var e,f,g,j,k;let l,m,{__scopeSlider:p,index:q,name:r,...s}=a,t=A(L,p),v=D(L,p),[w,x]=c.useState(null),y=(0,i.useComposedRefs)(d,a=>x(a)),z=!w||t.form||!!w.closest("form"),B=(0,n.useSize)(w),C=t.values[q],E=void 0===C?0:P(C,t.min,t.max),F=(e=q,(f=t.values.length)>2?`Value ${e+1} of ${f}`:2===f?["Minimum","Maximum"][e]:void 0),G=B?.[v.size],H=G?(g=G,j=E,k=v.direction,m=Q([0,50],[0,l=g/2]),(l-m(j)*k)*k):0;return c.useEffect(()=>{if(w)return t.thumbs.add(w),()=>{t.thumbs.delete(w)}},[w,t.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${E}% + ${H}px)`},children:[(0,b.jsx)(u.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(o.Primitive.span,{role:"slider","aria-label":a["aria-label"]||F,"aria-valuemin":t.min,"aria-valuenow":C,"aria-valuemax":t.max,"aria-orientation":t.orientation,"data-orientation":t.orientation,"data-disabled":t.disabled?"":void 0,tabIndex:t.disabled?void 0:0,...s,ref:y,style:void 0===C?{display:"none"}:a.style,onFocus:(0,h.composeEventHandlers)(a.onFocus,()=>{t.valueIndexToChangeRef.current=q})})}),z&&(0,b.jsx)(O,{name:r??(t.name?t.name+(t.values.length>1?"[]":""):void 0),form:t.form,value:C},q)]})});M.displayName=L;var O=a=>{let{value:d,...e}=a,f=c.useRef(null),g=(0,m.usePrevious)(d);return c.useEffect(()=>{let a=f.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(g!==d&&b){let c=new Event("input",{bubbles:!0});b.call(a,d),a.dispatchEvent(c)}},[g,d]),(0,b.jsx)("input",{style:{display:"none"},...e,ref:f,defaultValue:d})};function P(a,b,c){return(0,g.clamp)(100/(c-b)*(a-b),[0,100])}function Q(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}var R=a.i(97895);function S({className:a,defaultValue:d,value:e,min:f=0,max:g=100,...h}){let i=c.useMemo(()=>Array.isArray(e)?e:Array.isArray(d)?d:[f,g],[e,d,f,g]);return(0,b.jsxs)(B,{"data-slot":"slider",defaultValue:d,value:e,min:f,max:g,className:(0,R.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...h,children:[(0,b.jsx)(I,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,b.jsx)(K,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:i.length},(a,c)=>(0,b.jsx)(M,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},c))]})}var T=a.i(3130),U=a.i(54161),V=a.i(33508);let W=(0,a.i(70106).default)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var X=a.i(53071);function Y({subcategories:a=[],priceRange:g,onFilterChange:h}){let[i,j]=(0,c.useState)({subcategories:[],priceRange:[g?.min||0,g?.max||1e6],inStock:!1,onSale:!1}),k=a=>{let b={...i,priceRange:[a[0],a[1]]};j(b),h(b)},l=(a,b)=>{let c={...i,[a]:b};j(c),h(c)},m=()=>{let a={subcategories:[],priceRange:[g?.min||0,g?.max||1e6],inStock:!1,onSale:!1};j(a),h(a)},n=i.subcategories.length+ +!!i.inStock+ +!!i.onSale+ +(i.priceRange[0]!==(g?.min||0)||i.priceRange[1]!==(g?.max||1e6)),o=()=>(0,b.jsxs)("div",{className:"space-y-6",children:[a.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Subcategorías"}),(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(f.Checkbox,{id:`subcat-${a.id}`,checked:i.subcategories.includes(a.id),onCheckedChange:()=>{var b;let c,d;return b=a.id,c=i.subcategories.includes(b)?i.subcategories.filter(a=>a!==b):[...i.subcategories,b],void(j(d={...i,subcategories:c}),h(d))}}),(0,b.jsx)(e.Label,{htmlFor:`subcat-${a.id}`,className:"text-sm cursor-pointer",children:a.name})]},a.id))})]}),g&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Rango de Precio"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(S,{min:g.min,max:g.max,step:1e3,value:i.priceRange,onValueChange:k,className:"w-full"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["$",i.priceRange[0].toLocaleString("es-CO")]}),(0,b.jsxs)("span",{children:["$",i.priceRange[1].toLocaleString("es-CO")]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Disponibilidad"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(f.Checkbox,{id:"inStock",checked:i.inStock,onCheckedChange:a=>l("inStock",a)}),(0,b.jsx)(e.Label,{htmlFor:"inStock",className:"text-sm cursor-pointer",children:"En stock"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(f.Checkbox,{id:"onSale",checked:i.onSale,onCheckedChange:a=>l("onSale",a)}),(0,b.jsx)(e.Label,{htmlFor:"onSale",className:"text-sm cursor-pointer",children:"En oferta"})]})]})]}),n>0&&(0,b.jsxs)(d.Button,{variant:"outline",onClick:m,className:"w-full",children:[(0,b.jsx)(V.X,{className:"h-4 w-4 mr-2"}),"Limpiar filtros (",n,")"]})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsxs)(T.Card,{children:[(0,b.jsx)(T.CardHeader,{children:(0,b.jsxs)(T.CardTitle,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Filtros"}),n>0&&(0,b.jsx)(U.Badge,{variant:"secondary",children:n})]})}),(0,b.jsx)(T.CardContent,{children:(0,b.jsx)(o,{})})]})}),(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsxs)(X.Sheet,{children:[(0,b.jsx)(X.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(W,{className:"h-4 w-4 mr-2"}),"Filtros",n>0&&(0,b.jsx)(U.Badge,{variant:"secondary",className:"ml-2",children:n})]})}),(0,b.jsxs)(X.SheetContent,{side:"left",className:"w-80",children:[(0,b.jsx)(X.SheetHeader,{children:(0,b.jsx)(X.SheetTitle,{children:"Filtros"})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(o,{})})]})]})})]})}var Z=a.i(71987),$=a.i(38246),_=a.i(38784),aa=a.i(30431);function ab({product:a,showFavoriteButton:c=!0,isFavorited:e=!1}){let f=a.upp_existencia>0;return(0,b.jsxs)(T.Card,{className:"group overflow-hidden h-full flex flex-col",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)($.default,{href:`/productos/${a.slug}`,className:"block",children:(0,b.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-muted",children:[(0,b.jsx)(Z.default,{src:a.imagen_principal_url||"/placeholder.svg?height=300&width=300",alt:a.nombre_comercial||a.pdt_descripcion,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 50vw, 25vw"}),(0,b.jsxs)("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[a.is_new&&(0,b.jsx)(U.Badge,{variant:"default",className:"w-fit",children:"Nuevo"}),a.is_on_sale&&(0,b.jsx)(U.Badge,{variant:"destructive",className:"w-fit",children:"Oferta"}),!f&&(0,b.jsx)(U.Badge,{variant:"secondary",className:"w-fit",children:"Agotado"})]})]})}),c&&(0,b.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,b.jsx)(aa.FavoriteButton,{productId:a.id,initialIsFavorite:e,className:"bg-background/80 backdrop-blur-sm hover:bg-background"})})]}),(0,b.jsxs)(T.CardContent,{className:"p-4 flex-1",children:[(0,b.jsx)($.default,{href:`/productos/${a.slug}`,children:(0,b.jsx)("h3",{className:"font-semibold text-sm mb-1 line-clamp-2 group-hover:text-primary transition-colors",children:a.nombre_comercial||a.pdt_descripcion})}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["Código: ",a.pdt_codigo]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsxs)("span",{className:"text-lg font-bold",children:["$",a.precio?.toFixed(2)]}),a.is_on_sale&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground line-through",children:["$",(1.2*a.precio).toFixed(2)]})]})]}),(0,b.jsx)(T.CardFooter,{className:"p-4 pt-0",children:(0,b.jsxs)(d.Button,{className:"w-full",size:"sm",disabled:!f,children:[(0,b.jsx)(_.ShoppingCart,{className:"h-4 w-4 mr-2"}),f?"Agregar":"Agotado"]})})]})}var ac=a.i(83497);function ad({products:a,subcategories:e,siloSlug:f}){let[g,h]=(0,c.useState)({subcategories:[],priceRange:[0,1e6],inStock:!1,onSale:!1}),i=(0,c.useMemo)(()=>{if(0===a.length)return{min:0,max:1e6};let b=a.map(a=>a.precio||0).filter(a=>a>0);return{min:1e3*Math.floor(Math.min(...b)/1e3),max:1e3*Math.ceil(Math.max(...b)/1e3)}},[a]),j=(0,c.useMemo)(()=>a.filter(a=>{if(g.subcategories.length>0){let b=a.categories?.map(a=>a.subcategory?.id).filter(Boolean);if(!g.subcategories.some(a=>b?.includes(a)))return!1}let b=a.precio||0;if(b<g.priceRange[0]||b>g.priceRange[1])return!1;if(g.inStock){let b=a.warehouse_stock?.reduce((a,b)=>a+(b.available_quantity||0),0);if(!b||b<=0)return!1}return!g.onSale||!!a.is_on_sale}),[a,g]);return(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-4",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(Y,{subcategories:e,priceRange:i,onFilterChange:h})}),(0,b.jsxs)("div",{className:"lg:col-span-3",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[j.length," producto",1!==j.length?"s":""," encontrado",1!==j.length?"s":""]})}),j.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(a=>(0,b.jsx)(ab,{product:a},a.id))}):(0,b.jsx)(T.Card,{className:"p-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(ac.Package,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No hay productos disponibles"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No se encontraron productos con los filtros seleccionados. Intenta ajustar los filtros."}),(0,b.jsx)(d.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)($.default,{href:`/productos/${f}`,children:"Ver todas las subcategorías"})})]})})]})]})}a.s(["ProductsWithFilters",()=>ad],73806)}];

//# sourceMappingURL=components_products_products-with-filters_tsx_8d25c5f2._.js.map