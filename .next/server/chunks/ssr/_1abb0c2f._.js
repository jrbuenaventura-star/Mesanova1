module.exports=[917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(497895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],917171)},546893,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},277687,a=>{"use strict";var b=a.i(572131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["toast",()=>i,"useToast",()=>j])},703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},130656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},717371,a=>{"use strict";let b=(0,a.i(170106).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],717371)},916759,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(269240),f=a.i(703130),g=a.i(340695),h=a.i(205522),i=a.i(917171),j=a.i(546893),k=a.i(887682),l=a.i(277687),m=a.i(400210),n=a.i(596221),o=a.i(717371),p=a.i(238246);let q=["Tienda de hogar","Restaurante","Hotel","Catering","Mayorista","Minorista","Institucional","Otro"];function r(){let a=(0,d.useRouter)(),{toast:r}=(0,l.useToast)(),s=(0,e.createClient)(),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({company_name:"",business_type:"",contact_name:"",contact_phone:"",contact_email:"",contact_position:"",city:"",state:"",address:"",notes:""}),x=(a,b)=>{w(c=>({...c,[a]:b}))},y=async b=>{b.preventDefault(),u(!0);try{let{data:{user:b}}=await s.auth.getUser();if(!b)throw Error("No autenticado");let{data:c}=await s.from("aliados").select("id").eq("user_id",b.id).single();if(!c)throw Error("No tienes perfil de aliado");let{error:d}=await s.from("leads").insert({aliado_id:c.id,company_name:v.company_name,business_type:v.business_type||null,contact_name:v.contact_name,contact_phone:v.contact_phone||null,contact_email:v.contact_email||null,contact_position:v.contact_position||null,city:v.city||null,state:v.state||null,address:v.address||null,notes:v.notes||null,stage:"prospecto"});if(d)throw d;r({title:"Lead creado",description:"El prospecto se ha registrado correctamente"}),a.push("/aliado/leads"),a.refresh()}catch(a){console.error("Error:",a),r({title:"Error",description:a.message||"No se pudo crear el lead",variant:"destructive"})}finally{u(!1)}};return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-2xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(g.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,b.jsxs)(p.default,{href:"/aliado/leads",children:[(0,b.jsx)(m.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Volver a CRM"]})}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Nuevo Lead"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Registra un nuevo prospecto de distribuidor"})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.UserPlus,{className:"h-5 w-5"}),"Información del Prospecto"]}),(0,b.jsx)(f.CardDescription,{children:"Ingresa los datos del potencial distribuidor"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Empresa"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"company_name",children:"Nombre de la Empresa *"}),(0,b.jsx)(h.Input,{id:"company_name",value:v.company_name,onChange:a=>x("company_name",a.target.value),placeholder:"Empresa ABC S.A.S.",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"business_type",children:"Tipo de Negocio"}),(0,b.jsxs)(k.Select,{value:v.business_type,onValueChange:a=>x("business_type",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecciona tipo"})}),(0,b.jsx)(k.SelectContent,{children:q.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Contacto Principal"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"contact_name",children:"Nombre del Contacto *"}),(0,b.jsx)(h.Input,{id:"contact_name",value:v.contact_name,onChange:a=>x("contact_name",a.target.value),placeholder:"Juan Pérez",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"contact_position",children:"Cargo"}),(0,b.jsx)(h.Input,{id:"contact_position",value:v.contact_position,onChange:a=>x("contact_position",a.target.value),placeholder:"Gerente General"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"contact_phone",children:"Teléfono"}),(0,b.jsx)(h.Input,{id:"contact_phone",value:v.contact_phone,onChange:a=>x("contact_phone",a.target.value),placeholder:"+57 300 123 4567"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"contact_email",children:"Email"}),(0,b.jsx)(h.Input,{id:"contact_email",type:"email",value:v.contact_email,onChange:a=>x("contact_email",a.target.value),placeholder:"contacto@empresa.com"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Ubicación"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"city",children:"Ciudad"}),(0,b.jsx)(h.Input,{id:"city",value:v.city,onChange:a=>x("city",a.target.value),placeholder:"Bogotá"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"state",children:"Departamento"}),(0,b.jsx)(h.Input,{id:"state",value:v.state,onChange:a=>x("state",a.target.value),placeholder:"Cundinamarca"})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(i.Label,{htmlFor:"address",children:"Dirección"}),(0,b.jsx)(h.Input,{id:"address",value:v.address,onChange:a=>x("address",a.target.value),placeholder:"Calle 123 # 45-67"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"notes",children:"Notas"}),(0,b.jsx)(j.Textarea,{id:"notes",value:v.notes,onChange:a=>x("notes",a.target.value),placeholder:"Información adicional sobre el prospecto...",rows:4})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancelar"}),(0,b.jsxs)(g.Button,{type:"submit",disabled:t,className:"flex-1",children:[t&&(0,b.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Crear Lead"]})]})]})})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=_1abb0c2f._.js.map