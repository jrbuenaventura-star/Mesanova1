(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,459148,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(618566),a=e.i(555436),n=e.i(107233),i=e.i(299023),l=e.i(727612),o=e.i(201928),c=e.i(342920),d=e.i(488844),u=e.i(63209),m=e.i(269638),p=e.i(531278),h=e.i(37727),x=e.i(970065),f=e.i(994179),g=e.i(167881),v=e.i(23750),j=e.i(10708),w=e.i(184762),b=e.i(62870),C=e.i(630374),N=e.i(781947),S=e.i(248425),y=e.i(296626),P=e.i(30030),E=e.i(820783),T=e.i(30207),L=e.i(586318),R=e.i(934620),D=e.i(470152),k=e.i(981140),A="ScrollArea",[B,H]=(0,P.createContextScope)(A),[_,O]=B(A),z=r.forwardRef((e,s)=>{let{__scopeScrollArea:a,type:n="hover",dir:i,scrollHideDelay:l=600,...o}=e,[c,d]=r.useState(null),[u,m]=r.useState(null),[p,h]=r.useState(null),[x,f]=r.useState(null),[g,v]=r.useState(null),[j,w]=r.useState(0),[b,C]=r.useState(0),[N,y]=r.useState(!1),[P,T]=r.useState(!1),R=(0,E.useComposedRefs)(s,e=>d(e)),D=(0,L.useDirection)(i);return(0,t.jsx)(_,{scope:a,type:n,dir:D,scrollHideDelay:l,scrollArea:c,viewport:u,onViewportChange:m,content:p,onContentChange:h,scrollbarX:x,onScrollbarXChange:f,scrollbarXEnabled:N,onScrollbarXEnabledChange:y,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:P,onScrollbarYEnabledChange:T,onCornerWidthChange:w,onCornerHeightChange:C,children:(0,t.jsx)(S.Primitive.div,{dir:D,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});z.displayName=A;var I="ScrollAreaViewport",M=r.forwardRef((e,s)=>{let{__scopeScrollArea:a,children:n,nonce:i,...l}=e,o=O(I,a),c=r.useRef(null),d=(0,E.useComposedRefs)(s,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,t.jsx)(S.Primitive.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});M.displayName=I;var $="ScrollAreaScrollbar",W=r.forwardRef((e,s)=>{let{forceMount:a,...n}=e,i=O($,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:o}=i,c="horizontal"===e.orientation;return r.useEffect(()=>(c?l(!0):o(!0),()=>{c?l(!1):o(!1)}),[c,l,o]),"hover"===i.type?(0,t.jsx)(q,{...n,ref:s,forceMount:a}):"scroll"===i.type?(0,t.jsx)(F,{...n,ref:s,forceMount:a}):"auto"===i.type?(0,t.jsx)(U,{...n,ref:s,forceMount:a}):"always"===i.type?(0,t.jsx)(V,{...n,ref:s}):null});W.displayName=$;var q=r.forwardRef((e,s)=>{let{forceMount:a,...n}=e,i=O($,e.__scopeScrollArea),[l,o]=r.useState(!1);return r.useEffect(()=>{let e=i.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},s=()=>{t=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",s)}}},[i.scrollArea,i.scrollHideDelay]),(0,t.jsx)(y.Presence,{present:a||l,children:(0,t.jsx)(U,{"data-state":l?"visible":"hidden",...n,ref:s})})}),F=r.forwardRef((e,s)=>{var a;let{forceMount:n,...i}=e,l=O($,e.__scopeScrollArea),o="horizontal"===e.orientation,c=ed(()=>u("SCROLL_END"),100),[d,u]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>a[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,l.scrollHideDelay,u]),r.useEffect(()=>{let e=l.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],s=()=>{let s=e[t];r!==s&&(u("SCROLL"),c()),r=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[l.viewport,o,u,c]),(0,t.jsx)(y.Presence,{present:n||"hidden"!==d,children:(0,t.jsx)(V,{"data-state":"hidden"===d?"hidden":"visible",...i,ref:s,onPointerEnter:(0,k.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,k.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),U=r.forwardRef((e,s)=>{let a=O($,e.__scopeScrollArea),{forceMount:n,...i}=e,[l,o]=r.useState(!1),c="horizontal"===e.orientation,d=ed(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;o(c?e:t)}},10);return eu(a.viewport,d),eu(a.content,d),(0,t.jsx)(y.Presence,{present:n||l,children:(0,t.jsx)(V,{"data-state":l?"visible":"hidden",...i,ref:s})})}),V=r.forwardRef((e,s)=>{let{orientation:a="vertical",...n}=e,i=O($,e.__scopeScrollArea),l=r.useRef(null),o=r.useRef(0),[c,d]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=en(c.viewport,c.content),m={...n,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>l.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,t){return function(e,t,r,s="ltr"){let a=ei(r),n=t||a/2,i=r.scrollbar.paddingStart+n,l=r.scrollbar.size-r.scrollbar.paddingEnd-(a-n),o=r.content-r.viewport;return eo([i,l],"ltr"===s?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===a?(0,t.jsx)(X,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&l.current){let e=el(i.viewport.scrollLeft,c,i.dir);l.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=p(e,i.dir))}}):"vertical"===a?(0,t.jsx)(Y,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&l.current){let e=el(i.viewport.scrollTop,c);l.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=p(e))}}):null}),X=r.forwardRef((e,s)=>{let{sizes:a,onSizesChange:n,...i}=e,l=O($,e.__scopeScrollArea),[o,c]=r.useState(),d=r.useRef(null),u=(0,E.useComposedRefs)(s,d,l.onScrollbarXChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(G,{"data-orientation":"horizontal",...i,ref:u,sizes:a,style:{bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ei(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(l.viewport){var s,a;let n=l.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),s=n,a=r,s>0&&s<a&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&n({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ea(o.paddingLeft),paddingEnd:ea(o.paddingRight)}})}})}),Y=r.forwardRef((e,s)=>{let{sizes:a,onSizesChange:n,...i}=e,l=O($,e.__scopeScrollArea),[o,c]=r.useState(),d=r.useRef(null),u=(0,E.useComposedRefs)(s,d,l.onScrollbarYChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(G,{"data-orientation":"vertical",...i,ref:u,sizes:a,style:{top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ei(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(l.viewport){var s,a;let n=l.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),s=n,a=r,s>0&&s<a&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&n({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ea(o.paddingTop),paddingEnd:ea(o.paddingBottom)}})}})}),[J,K]=B($),G=r.forwardRef((e,s)=>{let{__scopeScrollArea:a,sizes:n,hasThumb:i,onThumbChange:l,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:p,...h}=e,x=O($,a),[f,g]=r.useState(null),v=(0,E.useComposedRefs)(s,e=>g(e)),j=r.useRef(null),w=r.useRef(""),b=x.viewport,C=n.content-n.viewport,N=(0,T.useCallbackRef)(m),y=(0,T.useCallbackRef)(d),P=ed(p,10);function L(e){j.current&&u({x:e.clientX-j.current.left,y:e.clientY-j.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;f?.contains(t)&&N(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[b,f,C,N]),r.useEffect(y,[n,y]),eu(f,P),eu(x.content,P),(0,t.jsx)(J,{scope:a,scrollbar:f,hasThumb:i,onThumbChange:(0,T.useCallbackRef)(l),onThumbPointerUp:(0,T.useCallbackRef)(o),onThumbPositionChange:y,onThumbPointerDown:(0,T.useCallbackRef)(c),children:(0,t.jsx)(S.Primitive.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:(0,k.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),j.current=f.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),L(e))}),onPointerMove:(0,k.composeEventHandlers)(e.onPointerMove,L),onPointerUp:(0,k.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,x.viewport&&(x.viewport.style.scrollBehavior=""),j.current=null})})})}),Q="ScrollAreaThumb",Z=r.forwardRef((e,r)=>{let{forceMount:s,...a}=e,n=K(Q,e.__scopeScrollArea);return(0,t.jsx)(y.Presence,{present:s||n.hasThumb,children:(0,t.jsx)(ee,{ref:r,...a})})}),ee=r.forwardRef((e,s)=>{let{__scopeScrollArea:a,style:n,...i}=e,l=O(Q,a),o=K(Q,a),{onThumbPositionChange:c}=o,d=(0,E.useComposedRefs)(s,e=>o.onThumbChange(e)),u=r.useRef(void 0),m=ed(()=>{u.current&&(u.current(),u.current=void 0)},100);return r.useEffect(()=>{let e=l.viewport;if(e){let t=()=>{m(),u.current||(u.current=ec(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[l.viewport,m,c]),(0,t.jsx)(S.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:(0,k.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top;o.onThumbPointerDown({x:r,y:s})}),onPointerUp:(0,k.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});Z.displayName=Q;var et="ScrollAreaCorner",er=r.forwardRef((e,r)=>{let s=O(et,e.__scopeScrollArea),a=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&a?(0,t.jsx)(es,{...e,ref:r}):null});er.displayName=et;var es=r.forwardRef((e,s)=>{let{__scopeScrollArea:a,...n}=e,i=O(et,a),[l,o]=r.useState(0),[c,d]=r.useState(0),u=!!(l&&c);return eu(i.scrollbarX,()=>{let e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),d(e)}),eu(i.scrollbarY,()=>{let e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(S.Primitive.div,{...n,ref:s,style:{width:l,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function ea(e){return e?parseInt(e,10):0}function en(e,t){let r=e/t;return isNaN(r)?0:r}function ei(e){let t=en(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function el(e,t,r="ltr"){let s=ei(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,l=(0,D.clamp)(e,"ltr"===r?[0,i]:[-1*i,0]);return eo([0,i],[0,n-s])(l)}function eo(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}var ec=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return!function a(){let n={left:e.scrollLeft,top:e.scrollTop},i=r.left!==n.left,l=r.top!==n.top;(i||l)&&t(),r=n,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function ed(e,t){let s=(0,T.useCallbackRef)(e),a=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(a.current),[]),r.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(s,t)},[s,t])}function eu(e,t){let r=(0,T.useCallbackRef)(t);(0,R.useLayoutEffect)(()=>{let t=0;if(e){let s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,r])}var em=e.i(647163);function ep({className:e,children:r,...s}){return(0,t.jsxs)(z,{"data-slot":"scroll-area",className:(0,em.cn)("relative",e),...s,children:[(0,t.jsx)(M,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),(0,t.jsx)(eh,{}),(0,t.jsx)(er,{})]})}function eh({className:e,orientation:r="vertical",...s}){return(0,t.jsx)(W,{"data-slot":"scroll-area-scrollbar",orientation:r,className:(0,em.cn)("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:(0,t.jsx)(Z,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var ex=e.i(269035);function ef({agentId:e}){let S=(0,s.useRouter)(),[y,P]=(0,r.useState)(!0),[E,T]=(0,r.useState)(!1),[L,R]=(0,r.useState)([]),[D,k]=(0,r.useState)(null),[A,B]=(0,r.useState)([]),[H,_]=(0,r.useState)([]),[O,z]=(0,r.useState)(""),[I,M]=(0,r.useState)("all"),[$,W]=(0,r.useState)(""),[q,F]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[X,Y]=(0,r.useState)("");(0,r.useEffect)(()=>{J()},[e]);let J=async()=>{P(!0);try{R([{id:"1",companyName:"Distribuidora El Éxito",rif:"J-12345678-9",discountPercentage:20,minimumOrder:5e5,creditLimit:1e8,currentBalance:25e6,creditDays:30},{id:"2",companyName:"Comercial La Gran Tienda",rif:"J-23456789-0",discountPercentage:15,minimumOrder:3e5,creditLimit:75e6,currentBalance:18e6,creditDays:30},{id:"3",companyName:"Almacén Don José",rif:"J-34567890-1",discountPercentage:12,minimumOrder:2e5,creditLimit:3e7,currentBalance:5e6,creditDays:15}]),B([{id:"1",code:"ABC-001",name:"Tabla de Cortar Bambú Premium",price:89900,stock:150,image:"/bamboo-cutting-board.png",category:"Cocina",rotacion:"alta"},{id:"2",code:"DEF-002",name:"Set de Cuchillos Profesionales",price:199e3,stock:45,image:"/cookware-set.png",category:"Cocina",rotacion:"media"},{id:"3",code:"GHI-003",name:"Olla a Presión 6L",price:199e3,stock:30,image:"/cookware-set.png",category:"Cocina",rotacion:"alta"},{id:"4",code:"JKL-004",name:"Vajilla Porcelana 24 piezas",price:199e3,stock:25,image:"/crystal-wine-glasses.png",category:"Mesa",rotacion:"media"},{id:"5",code:"MNO-005",name:"Termo Acero Inoxidable 1L",price:49e3,stock:200,image:"/cookware-set.png",category:"Termos-Neveras",rotacion:"alta"},{id:"6",code:"PQR-006",name:"Copa Vino Cristal x6",price:85e3,stock:80,image:"/crystal-wine-glasses.png",category:"Café-Té-Bar",rotacion:"media"},{id:"7",code:"STU-007",name:"Bandeja Servir Madera",price:65e3,stock:60,image:"/bamboo-cutting-board.png",category:"Mesa",rotacion:"baja"},{id:"8",code:"VWX-008",name:"Set Cubiertos 24 piezas",price:12e4,stock:40,image:"/cookware-set.png",category:"Mesa",rotacion:"media"}])}catch(e){console.error("Error loading data:",e)}finally{P(!1)}},K=(0,r.useMemo)(()=>A.filter(e=>{let t=e.name.toLowerCase().includes(O.toLowerCase())||e.code.toLowerCase().includes(O.toLowerCase()),r="all"===I||e.category===I;return t&&r}),[A,O,I]),G=(0,r.useMemo)(()=>[...new Set(A.map(e=>e.category))],[A]),Q=(e,t)=>{if(t<=0)return void Z(e);let r=A.find(t=>t.id===e);r&&t>r.stock&&(t=r.stock),_(H.map(r=>r.product.id===e?{...r,quantity:t,subtotal:t*r.discountedPrice}:r))},Z=e=>{_(H.filter(t=>t.product.id!==e))},ee=(0,r.useMemo)(()=>{let e=H.reduce((e,t)=>e+t.unitPrice*t.quantity,0),t=H.reduce((e,t)=>e+(t.unitPrice-t.discountedPrice)*t.quantity,0);return{subtotal:e,discount:t,total:e-t,itemCount:H.reduce((e,t)=>e+t.quantity,0)}},[H]),et=(0,r.useMemo)(()=>{if(!D||0===H.length||ee.total<D.minimumOrder)return!1;let e=D.creditLimit-D.currentBalance;return!(ee.total>e)},[D,H,ee]),er=async()=>{if(et&&D){T(!0);try{await new Promise(e=>setTimeout(e,2e3));let e=`2026-${String(Math.floor(999999*Math.random())).padStart(6,"0")}`;Y(e),V(!0),F(!1)}catch(e){console.error("Error submitting order:",e)}finally{T(!1)}}};return y?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(p.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):U?(0,t.jsx)(x.Card,{className:"max-w-lg mx-auto",children:(0,t.jsxs)(x.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(m.CheckCircle,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"¡Pedido Creado!"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"El pedido ha sido registrado exitosamente"}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg mb-6",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Número de pedido"}),(0,t.jsx)("p",{className:"text-2xl font-mono font-bold",children:X})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>{V(!1),_([]),W("")},children:"Nuevo Pedido"}),(0,t.jsx)(g.Button,{onClick:()=>S.push("/canal"),children:"Volver al Panel"})]})]})}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(x.Card,{children:[(0,t.jsx)(x.CardHeader,{className:"pb-3",children:(0,t.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Building,{className:"w-5 h-5"}),"Seleccionar Distribuidor"]})}),(0,t.jsxs)(x.CardContent,{children:[(0,t.jsxs)(b.Select,{value:D?.id||"",onValueChange:e=>{let t=L.find(t=>t.id===e);k(t||null),t&&_(H.map(e=>{let r=e.unitPrice*(1-t.discountPercentage/100);return{...e,discountedPrice:r,subtotal:e.quantity*r}}))},children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"Selecciona un distribuidor asignado"})}),(0,t.jsx)(b.SelectContent,{children:L.map(e=>(0,t.jsx)(b.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.companyName}),(0,t.jsxs)(f.Badge,{variant:"secondary",children:[e.discountPercentage,"% desc."]})]})},e.id))})]}),D&&(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Descuento"}),(0,t.jsxs)("p",{className:"font-semibold text-green-600",children:[D.discountPercentage,"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Pedido mínimo"}),(0,t.jsxs)("p",{className:"font-semibold",children:["$",D.minimumOrder.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Crédito disponible"}),(0,t.jsxs)("p",{className:"font-semibold",children:["$",(D.creditLimit-D.currentBalance).toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Plazo"}),(0,t.jsxs)("p",{className:"font-semibold",children:[D.creditDays," días"]})]})]})]})]}),(0,t.jsxs)(x.Card,{children:[(0,t.jsxs)(x.CardHeader,{children:[(0,t.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Package,{className:"w-5 h-5"}),"Catálogo de Productos"]}),(0,t.jsx)(x.CardDescription,{children:"Agrega productos al pedido"})]}),(0,t.jsxs)(x.CardContent,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(v.Input,{placeholder:"Buscar por nombre o código...",value:O,onChange:e=>z(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(b.Select,{value:I,onValueChange:M,children:[(0,t.jsx)(b.SelectTrigger,{className:"w-48",children:(0,t.jsx)(b.SelectValue,{placeholder:"Categoría"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"all",children:"Todas"}),G.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsx)(ep,{className:"h-96",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:K.map(e=>{var r;let s=H.find(t=>t.product.id===e.id),a=D?e.price*(1-D.discountPercentage/100):e.price;return(0,t.jsxs)("div",{className:`border rounded-lg p-3 flex gap-3 ${!D?"opacity-50":"hover:border-primary cursor-pointer"} ${s?"border-primary bg-primary/5":""}`,onClick:()=>D&&(e=>{if(!D)return;let t=H.find(t=>t.product.id===e.id),r=D.discountPercentage,s=e.price*(1-r/100);t?_(H.map(t=>t.product.id===e.id?{...t,quantity:t.quantity+1,subtotal:(t.quantity+1)*s}:t)):_([...H,{product:e,quantity:1,unitPrice:e.price,discountedPrice:s,subtotal:s}])})(e),children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-muted rounded flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-mono text-xs text-muted-foreground",children:e.code}),(0,t.jsx)("p",{className:"font-medium text-sm truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(r=e.rotacion,(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${{alta:"bg-green-100 text-green-800",media:"bg-yellow-100 text-yellow-800",baja:"bg-red-100 text-red-800"}[r]}`,children:r})),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Stock: ",e.stock]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[D&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground line-through",children:["$",e.price.toLocaleString()]}),(0,t.jsxs)("span",{className:"font-semibold text-green-600",children:["$",Math.round(a).toLocaleString()]})]})]}),s&&(0,t.jsx)(f.Badge,{className:"self-start",children:s.quantity})]},e.id)})})})]})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(x.Card,{className:"sticky top-4",children:[(0,t.jsxs)(x.CardHeader,{children:[(0,t.jsxs)(x.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.ShoppingCart,{className:"w-5 h-5"}),"Carrito"]}),H.length>0&&(0,t.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{_([])},children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsxs)(x.CardDescription,{children:[ee.itemCount," productos"]})]}),(0,t.jsxs)(x.CardContent,{children:[0===H.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(o.ShoppingCart,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"El carrito está vacío"})]}):(0,t.jsx)(ep,{className:"h-64",children:(0,t.jsx)("div",{className:"space-y-3",children:H.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:e.product.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["$",e.discountedPrice.toLocaleString()," c/u"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.Button,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>Q(e.product.id,e.quantity-1),children:(0,t.jsx)(i.Minus,{className:"w-3 h-3"})}),(0,t.jsx)("span",{className:"w-8 text-center text-sm",children:e.quantity}),(0,t.jsx)(g.Button,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>Q(e.product.id,e.quantity+1),children:(0,t.jsx)(n.Plus,{className:"w-3 h-3"})})]}),(0,t.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500",onClick:()=>Z(e.product.id),children:(0,t.jsx)(h.X,{className:"w-3 h-3"})})]},e.product.id))})}),(0,t.jsx)(ex.Separator,{className:"my-4"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",ee.subtotal.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsxs)("span",{children:["Descuento (",D?.discountPercentage||0,"%)"]}),(0,t.jsxs)("span",{children:["-$",ee.discount.toLocaleString()]})]}),(0,t.jsx)(ex.Separator,{}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",ee.total.toLocaleString()]})]})]}),D&&H.length>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[ee.total<D.minimumOrder&&(0,t.jsxs)(N.Alert,{variant:"destructive",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4"}),(0,t.jsxs)(N.AlertDescription,{children:["Pedido mínimo: $",D.minimumOrder.toLocaleString(),". Faltan $",(D.minimumOrder-ee.total).toLocaleString()]})]}),ee.total>D.creditLimit-D.currentBalance&&(0,t.jsxs)(N.Alert,{variant:"destructive",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(N.AlertDescription,{children:"Excede el crédito disponible"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(j.Label,{htmlFor:"notes",children:"Notas del pedido"}),(0,t.jsx)(w.Textarea,{id:"notes",placeholder:"Instrucciones especiales...",value:$,onChange:e=>W(e.target.value),className:"mt-1",rows:2})]})]}),(0,t.jsx)(x.CardFooter,{children:(0,t.jsxs)(g.Button,{className:"w-full",size:"lg",disabled:!et,onClick:()=>F(!0),children:[(0,t.jsx)(o.ShoppingCart,{className:"w-4 h-4 mr-2"}),"Crear Pedido"]})})]})}),(0,t.jsx)(C.Dialog,{open:q,onOpenChange:F,children:(0,t.jsxs)(C.DialogContent,{children:[(0,t.jsxs)(C.DialogHeader,{children:[(0,t.jsx)(C.DialogTitle,{children:"Confirmar Pedido"}),(0,t.jsx)(C.DialogDescription,{children:"Revisa los detalles antes de confirmar"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Distribuidor"}),(0,t.jsx)("p",{className:"font-medium",children:D?.companyName}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:D?.rif})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Productos"}),(0,t.jsx)("p",{className:"font-medium",children:ee.itemCount})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Descuento aplicado"}),(0,t.jsxs)("p",{className:"font-medium text-green-600",children:[D?.discountPercentage,"%"]})]})]}),(0,t.jsx)(ex.Separator,{}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,t.jsx)("span",{children:"Total del Pedido"}),(0,t.jsxs)("span",{children:["$",ee.total.toLocaleString()]})]}),$&&(0,t.jsxs)("div",{className:"p-3 bg-muted rounded text-sm",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Notas:"}),(0,t.jsx)("p",{children:$})]})]}),(0,t.jsxs)(C.DialogFooter,{children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,t.jsx)(g.Button,{onClick:er,disabled:E,children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Procesando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.CheckCircle,{className:"w-4 h-4 mr-2"}),"Confirmar Pedido"]})})]})]})})]})}e.s(["CreateOrderForDistributor",()=>ef],459148)}]);