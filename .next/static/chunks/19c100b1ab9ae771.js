(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var a=e.i(843476),t=e.i(271645),s=e.i(248425),o=t.forwardRef((e,t)=>(0,a.jsx)(s.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));o.displayName="Label";var n=e.i(647163);function i({className:e,...t}){return(0,a.jsx)(o,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>i],10708)},120682,e=>{"use strict";var a=e.i(271645);let t=0,s=new Map,o=e=>{if(s.has(e))return;let a=setTimeout(()=>{s.delete(e),r({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,a)},n=[],i={toasts:[]};function r(e){i=((e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}})(i,e),n.forEach(e=>{e(i)})}function l({...e}){let a=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>r({type:"DISMISS_TOAST",toastId:a});return r({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>r({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function c(){let[e,t]=a.useState(i);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>r({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>l,"useToast",()=>c])},861950,e=>{"use strict";var a=e.i(843476),t=e.i(271645),s=e.i(618566),o=e.i(920755),n=e.i(167881),i=e.i(23750),r=e.i(10708),l=e.i(120682),c=e.i(531278);function d({aliado:e,userProfile:d}){let m=(0,s.useRouter)(),{toast:p}=(0,l.useToast)(),u=(0,o.createClient)(),[h,f]=(0,t.useState)(!1),[y,T]=(0,t.useState)({company_name:e.company_name||"",contact_name:e.contact_name||d.full_name||"",email:e.email||"",phone:e.phone||d.phone||""}),_=(e,a)=>{T(t=>({...t,[e]:a}))},v=async a=>{a.preventDefault(),f(!0);try{let{error:a}=await u.from("aliados").update({company_name:y.company_name,contact_name:y.contact_name,email:y.email,phone:y.phone}).eq("id",e.id);if(a)throw a;p({title:"Perfil actualizado",description:"Los cambios se han guardado correctamente"}),m.refresh()}catch(e){p({title:"Error",description:e.message||"No se pudo guardar el perfil",variant:"destructive"})}finally{f(!1)}};return(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(r.Label,{htmlFor:"company_name",children:"Empresa"}),(0,a.jsx)(i.Input,{id:"company_name",value:y.company_name,onChange:e=>_("company_name",e.target.value),placeholder:"Nombre de la empresa"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"contact_name",children:"Nombre de contacto"}),(0,a.jsx)(i.Input,{id:"contact_name",value:y.contact_name,onChange:e=>_("contact_name",e.target.value),placeholder:"Nombre y apellido"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"phone",children:"TelÃ©fono"}),(0,a.jsx)(i.Input,{id:"phone",value:y.phone,onChange:e=>_("phone",e.target.value),placeholder:"+57 300 000 0000"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(r.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(i.Input,{id:"email",type:"email",value:y.email,onChange:e=>_("email",e.target.value),placeholder:"correo@empresa.com"})]})]}),(0,a.jsxs)(n.Button,{type:"submit",disabled:h,className:"w-full",children:[h&&(0,a.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar cambios"]})]})}e.s(["AliadoProfileForm",()=>d])}]);